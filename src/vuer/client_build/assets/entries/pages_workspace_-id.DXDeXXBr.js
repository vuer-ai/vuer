import{r as u,j as a,$ as w,q as mr,k as Vt,n as hr,s as Bt,N as gr,d as mn,t as vr,u as Nt,H as xr,R as wr,J as yr,i as br,a as Sr,b as jr,c as Tr,o as kr}from"../chunks/chunk-Bxh3mmdk.js";import{M as Er,d as hn,e as Cr,f as Rr,g as Nr,T as Mr,h as Dr,i as gn,u as _e,j as Te,k as Mt,l as vn,m as xn,n as wn,o as Ht,p as Wt,P as Pr,q as Or,R as Ir,r as Ar,U as $r,s as Lr,t as Fr,v as zr,w as Ur,x as _r,y as Dt,z as Vr,B as Br,D as Hr,E as Wr,F as qr,H as Yr,I as Xr,J as Qr,K as Kr,N as Gr,O as Zr,Q as Le,X as Jr,Y as ea,_ as ta,$ as na,a0 as ra,a1 as aa,a2 as oa,a3 as sa,a4 as ia,a5 as yn,a6 as dt,a7 as la,a8 as ca,a9 as ua,W as da,aa as fa,ab as pa,ac as ma,ad as ha,ae as ga,af as va,ag as xa,ah as wa,ai as ya,aj as ba,ak as Sa,V as ja,L as Ta,Z as ka}from"../chunks/chunk-BcIzroif.js";import{c as ot,u as bn}from"../chunks/chunk-C7W2L0Re.js";import{j as Pe}from"../chunks/chunk-Bi65IN6L.js";import{c as A,S as Ve,a as Re,B as me}from"../chunks/chunk-DK86WuFI.js";import{R as Sn,C as jn,a as Tn,T as kn,P as En,O as Cn,b as Ea,D as Ca,u as Ra}from"../chunks/chunk-1XLnABOP.js";import{T as Rn,u as Na,j as Ma,X as Da,e as ue,f as de,g as fe,D as Pa,a as Oa,b as Ia,h as Aa,c as qt,i as $a,L as La,E as Fa}from"../chunks/chunk-CvLG4DX1.js";import{P as za,a as Ua}from"../chunks/chunk-BY7XLEYA.js";import{P as _a}from"../chunks/chunk-Dc0d9LZe.js";import{T as Va,F as Ba}from"../chunks/chunk-CfPHAf7B.js";import{X as Ha,D as Wa}from"../chunks/chunk-D9NTQ-8-.js";import{u as Be}from"../chunks/chunk-BrI55jUa.js";import{k as qa,l as Ya,n as Xa,A as jt,b as Yt,a as Tt,w as kt,I as Qa,u as Ka,g as Ga,h as Za,o as Ja}from"../chunks/chunk-CdabVADL.js";import{b as eo,u as to,c as no}from"../chunks/chunk-S1zsQQps.js";import{S as Pt}from"../chunks/chunk-BVqnrQk9.js";import{I as Et,a as Xt}from"../chunks/chunk-CkhHjPPW.js";import{n as ro}from"../chunks/chunk-B3ucfPx8.js";import"../chunks/chunk-D9z31qZm.js";import"../chunks/chunk-liTnN7pR.js";/* empty css                      */import"../chunks/chunk-BXl3LOEh.js";import"../chunks/chunk-BryG31u9.js";import"../chunks/chunk-DwlDFfQQ.js";import"../chunks/chunk-XNusesNe.js";import"../chunks/chunk-B-rFznE-.js";function ao(e){const[t,n]=u.useState(()=>{const l=new Set;return e.forEach(i=>{i.isCollapsible&&l.add(i.id)}),l}),[r,o]=u.useState(null),s=l=>{n(i=>{const f=new Set(i);return f.has(l)?f.delete(l):f.add(l),f})},c=u.useMemo(()=>{const l=new Map;return e.forEach(i=>{l.has(i.parentId)||l.set(i.parentId,[]),l.get(i.parentId).push(i)}),l},[e]),d=u.useMemo(()=>{const l=new Map(e.map(f=>[f.id,f])),i=f=>{const x=[];let g=f.parentId;for(;g;){const m=l.get(g);if(m)x.unshift(m),g=m.parentId;else break}return x};return e.map(f=>{const x=c.get(f.parentId)||[],g=x.length>0&&x[x.length-1].id===f.id,m=i(f);return{...f,isLast:g,ancestors:m}})},[c,e]),p=l=>l.ancestors.every(i=>!i.isCollapsible||t.has(i.id));return{expandedItems:t,hoveredId:r,setHoveredId:o,toggleItem:s,logDataWithMeta:d,getVisibleLogData:l=>l.filter(p)}}var et=22,Ot=e=>{const t=e<0?"-":"",n=Math.abs(e);if(n<1)return n<5e-4?"0s":`${t}${Math.round(n*1e3)}ms`;if(n<60)return`${t}${n.toFixed(3)}s`;const r=60,o=3600,s=86400,c=2592e3,d=31536e3;if(n<o){const i=Math.floor(n/r),f=n%r;return`${t}${i}m ${f.toFixed(2).padStart(5,"0")}s`}if(n<s){const i=Math.floor(n/o),f=Math.floor(n%o/r),x=Math.floor(n%r);return`${t}${i}h ${String(f).padStart(2,"0")}m ${String(x).padStart(2,"0")}s`}if(n<c){const i=Math.floor(n/s),f=Math.floor(n%s/o),x=Math.floor(n%o/r);return`${t}${i}d ${String(f).padStart(2,"0")}h ${String(x).padStart(2,"0")}m`}if(n<d){const i=Math.floor(n/c),f=Math.floor(n%c/s),x=Math.floor(n%s/o);return`${t}${i}mo ${String(f).padStart(3,"0")}d ${String(x).padStart(2,"0")}h`}const p=Math.floor(n/d),h=Math.floor(n%d/c),l=Math.floor(n%c/s);return`${t}${p}y ${String(h).padStart(2,"0")}mo ${String(l).padStart(3,"0")}d`},Qt={blue:"border-blue-500",green:"border-green-500",orange:"border-orange-500",purple:"border-purple-500","gray-light":"border-muted","gray-medium":"border-slate-400 dark:border-slate-600"},tt={blue:"bg-blue-500",green:"bg-green-500",orange:"bg-orange-500",purple:"bg-purple-500","gray-light":"bg-muted","gray-medium":"bg-slate-400 dark:bg-slate-700"},oo={blue:"border-l-blue-500",green:"border-l-green-500",orange:"border-l-orange-500",purple:"border-l-purple-500","gray-light":"border-l-slate-300 dark:border-l-slate-600","gray-medium":"border-l-slate-400 dark:border-l-slate-500"},so={blue:"border-r-blue-500",green:"border-r-green-500",orange:"border-r-orange-500",purple:"border-r-purple-500","gray-light":"border-r-slate-300 dark:border-r-slate-600","gray-medium":"border-r-slate-400 dark:border-r-slate-500"};function io({visibleLogData:e,onTemporalCursorChange:t,temporalCursor:n}){const[r,o]=u.useState(-et*.25),[s,c]=u.useState(et*1.5),[d,p]=u.useState(!1),[h,l]=u.useState(null),i=u.useRef(null),f=u.useRef(0),x=u.useRef(!1),g=u.useRef(null),[m,j]=u.useState(!1),[v,k]=u.useState(0),[E,y]=u.useState(""),[C,L]=u.useState(!1),b=n??h,O=u.useCallback(S=>(S-r)/s*100,[r,s]),R=u.useMemo(()=>{const S=[],M=[.001,.002,.005,.01,.02,.05,.1,.2,.5,1,2,5,10,20,50,100],I=s/10,F=M.find(K=>K>I)||M[M.length-1],Y=r+s,z=new Set,X=K=>{const H=K<0?"-":"",re=Math.abs(K);let oe=Math.floor(re),ie=Math.round((re-oe)*1e3);if(ie>=1e3&&(oe+=1,ie-=1e3),re<1&&re>-1)return`${H}${ie}ms`;const xe=oe*(H==="-"?-1:1);return z.has(xe)?ie>0?`+${ie}ms`:"":(z.add(xe),ie===0?`${H}${oe}s`:`${H}${oe}s`)},B=Math.floor(r/F)*F,te=Math.ceil(Y/F)*F;for(let K=B;K<=te;K+=F){const H=Number.parseFloat(K.toPrecision(15)),re=X(H);re&&S.push({time:H,label:re})}return S},[r,s]),D=u.useMemo(()=>{const S=[],M=new Set,$=(I,F)=>{const Y=`${I.toFixed(6)}-${F}`;M.has(Y)||(S.push({time:I,type:F}),M.add(Y))};return e.forEach(I=>{I.createTime!==void 0&&$(I.createTime,"create"),I.startTime!==void 0&&$(I.startTime,"start"),I.startTime!==void 0&&I.duration!==void 0&&$(I.startTime+I.duration,"end"),I.time!==void 0&&$(I.time,"event")}),S.sort((I,F)=>I.time-F.time)},[e]),_=u.useCallback(()=>{if(!x.current)return;const S=i.current;if(!S)return;const M=S.getBoundingClientRect(),$=f.current-M.left,I=r+$/S.offsetWidth*s,Y=8/S.offsetWidth*s;let z=null,X=Number.POSITIVE_INFINITY;for(const K of D){const H=Math.abs(K.time-I);H<X&&H<Y&&(X=H,z=K)}const B=z?.time??I,te=O(B);k(te),y(Ot(B)),L(!!z),j(!0)},[r,s,D,O]),G=S=>{const M=s*.1;o(S==="left"?$=>$-M:$=>$+M)},N=S=>{S.preventDefault(),S.stopPropagation();const M=S.clientX,$=s,I=r+s/2;let F=!0;p(!0);const Y=X=>{if(!F)return;const B=X.clientX-M,K=Math.pow(1.1,B*.05),H=$*K,re=.01,oe=et*10;if(H>=re&&H<=oe){const ie=I-H/2;c(H),o(ie)}},z=()=>{F=!1,p(!1),document.removeEventListener("mousemove",Y),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",Y),document.addEventListener("mouseup",z)},q=S=>{const M=i.current;if(!M)return;const $=M.getBoundingClientRect(),I=S.clientX-$.left,F=r+I/M.offsetWidth*s,z=8/M.offsetWidth*s;let X=null,B=Number.POSITIVE_INFINITY;for(const K of D){const H=Math.abs(K.time-F);H<B&&H<z&&(B=H,X=K)}const te=X?.time??F;t?t(te):l(te)};return u.useEffect(()=>{const S=i.current;if(!S)return;const M=F=>{d||(f.current=F.clientX,g.current&&cancelAnimationFrame(g.current),g.current=requestAnimationFrame(_))},$=()=>{x.current=!0},I=()=>{x.current=!1,g.current&&cancelAnimationFrame(g.current),j(!1)};return S.addEventListener("mousemove",M),S.addEventListener("mouseenter",$),S.addEventListener("mouseleave",I),()=>{S.removeEventListener("mousemove",M),S.removeEventListener("mouseenter",$),S.removeEventListener("mouseleave",I),g.current&&cancelAnimationFrame(g.current)}},[_,d]),u.useEffect(()=>{x.current&&(g.current&&cancelAnimationFrame(g.current),g.current=requestAnimationFrame(_))},[r,s,_]),{viewStart:r,viewDuration:s,timelineContainerRef:i,activeTemporalCursor:b,timeToPercent:O,ticks:R,eventDots:D,handlePan:G,handleZoomDragStart:N,handleTimelineClick:q,setViewStart:o,setViewDuration:c,cursorVisible:m,cursorPosition:v,cursorLabel:E,showMagnet:C}}function lo({item:e,isHovered:t,onMouseEnter:n,onMouseLeave:r,onClick:o,timeToPercent:s}){return e?.time===void 0||e?.time===null?null:a.jsx("div",{className:A("relative h-[32px]",t&&"bg-bg-secondary"),onMouseEnter:n,onMouseLeave:r,children:a.jsx("div",{className:A("absolute top-1/2 -translate-x-1/2 -translate-y-1/2","border-bg-primary h-3 w-3 rotate-45 border-2",e.color&&tt[e.color],o&&"cursor-pointer transition-transform hover:scale-110"),style:{left:`${s(e.time)}%`},onClick:c=>{o&&e.time!==void 0&&(c.stopPropagation(),o(e.time))},title:e.label})})}var co=(e,t,n)=>Math.min(Math.max(e,t),n);function uo({item:e,isHovered:t,onMouseEnter:n,onMouseLeave:r,onClick:o,viewStart:s,viewWindow:c,timeToPercent:d}){const p=s+c,h=e.isHaltedStep,l=e.startTime,i=e.startTime!==void 0&&e.duration!==void 0?e.startTime+e.duration:void 0;return a.jsxs("div",{className:A("relative h-[32px] w-full",t&&"bg-bg-secondary"),onMouseEnter:n,onMouseLeave:r,children:[e.createTime!==void 0&&e.startTime!==void 0&&e.createTime<e.startTime&&e.color&&a.jsxs("div",{className:"absolute top-1/2 h-2 -translate-y-1/2",style:{left:`${d(e.createTime)}%`,width:`${(e.startTime-e.createTime)/c*100}%`},children:[a.jsx("div",{className:A("absolute top-1/2 left-0 h-2 w-px -translate-y-1/2",tt[e.color])}),a.jsx("div",{className:A("absolute top-1/2 w-full -translate-y-1/2 border-t",Qt[e.color])}),a.jsx("div",{className:A("absolute top-1/2 right-0 h-2 w-px -translate-y-1/2",tt[e.color])})]}),e.startTime!==void 0&&e.duration!==void 0&&!h&&a.jsx("div",{className:A("rounded-uk-xs absolute top-1/2 flex h-5 -translate-y-1/2 items-center justify-center overflow-hidden",e.color&&tt[e.color],e.hasStripes&&"bg-[repeating-linear-gradient(-45deg,transparent,transparent_4px,rgba(0,0,0,0.1)_4px,rgba(0,0,0,0.1)_8px)]",o&&"cursor-pointer"),style:{left:`${d(e.startTime)}%`,width:`${e.duration/c*100}%`},onClick:f=>{if(o&&e.startTime!==void 0){f.stopPropagation();const x=f.currentTarget.getBoundingClientRect(),m=(f.clientX-x.left)/x.width,j=e.startTime+e.duration*m;o(j)}}}),e.startTime!==void 0&&e.duration!==void 0&&!h&&(()=>{const f=Math.max(l,s),x=Math.min(i,p);if(x<=f)return null;const m=(x-f)/c*100;return m<4?null:a.jsx("div",{className:"pointer-events-none absolute top-1/2 flex h-5 -translate-y-1/2 items-center justify-center",style:{left:`${d(f)}%`,width:`${m}%`},children:a.jsx("span",{className:A("text-uk-sm font-medium whitespace-nowrap",e.color==="gray-light"||e.color==="gray-medium"?"text-slate-600 dark:text-slate-300":"text-text-withbg"),children:Ot(e.duration)})})})(),e.startTime!==void 0&&e.duration!==void 0&&!h&&e.color&&a.jsx("div",{className:A("bg-bg-primary absolute top-1/2 z-10 size-2 -translate-x-1/2 -translate-y-1/2 rounded-full border-2",Qt[e.color]),style:{left:`${d(e.startTime)}%`}}),h&&e.startTime!==void 0&&e.duration!==void 0&&a.jsx("div",{className:"absolute top-1/2 flex h-full -translate-y-1/2 items-center",style:{left:`${d(e.startTime)}%`,width:`${e.duration/c*100}%`},children:a.jsxs("div",{className:"relative flex h-full w-full items-center justify-center",children:[a.jsx("div",{className:"bg-line-secondary absolute top-1/2 left-0 h-2 w-px -translate-y-1/2"}),a.jsx("div",{className:"bg-line-secondary w-full border-t border-dashed"}),a.jsx("div",{className:"bg-line-secondary absolute top-1/2 right-0 h-2 w-px -translate-y-1/2"})]})}),h&&e.startTime!==void 0&&e.duration!==void 0&&(()=>{const f=Math.max(l,s),x=Math.min(i,p);if(x<=f)return null;const m=(x-f)/c*100;return a.jsxs("div",{className:"pointer-events-none absolute top-1/2 flex -translate-y-1/2 items-center justify-center overflow-hidden",style:{left:`${d(f)}%`,width:`${m}%`,zoom:co(m,6,12)/12},children:[m>7&&a.jsx("span",{className:"rounded-full bg-orange-500 px-2 py-0.5 text-xs text-white",children:"Halted"}),m<7&&a.jsx("span",{className:"h-3 w-3 rounded-full bg-orange-500"})]})})()]})}function fo({item:e,classes:t,viewStart:n}){const r=e.startTime!==void 0&&e.duration!==void 0?e.startTime+e.duration:void 0,o=r!==void 0&&r<n||e.time!==void 0&&e.time<n;return a.jsx("div",{className:A("relative flex h-[32px] w-0 flex-row justify-items-center"),children:o&&e.color?a.jsx("div",{className:A("my-auto border-y-[6px] border-r-[5px] border-y-transparent",t[e.color])}):null},`left-wedge=${e.id}`)}function po({item:e,classes:t,viewEnd:n}){const r=e.startTime,o=r!==void 0&&r>n||e.time!==void 0&&e.time>n;return a.jsx("div",{className:A("relative flex h-[32px] w-0 flex-row justify-items-center"),children:o&&e.color?a.jsx("div",{className:A("my-auto border-y-[6px] border-l-[5px] border-y-transparent",t[e.color])}):null},`right-wedge=${e.id}`)}function mo({ref:e,className:t,viewStart:n,viewDuration:r,onViewStartChange:o,onWindowChange:s,minWindow:c=.01,maxWindow:d=1/0,zoomFactor:p=1.1,enabled:h=!0,children:l}){const i=u.useRef(null),f=e||i;u.useEffect(()=>{const g=f.current;if(!g||!h)return;const m=j=>{j.preventDefault()};return g.addEventListener("wheel",m,{passive:!1}),()=>{g.removeEventListener("wheel",m)}},[h]);const x=u.useCallback(g=>{if(!h)return;const m=f.current;if(m)if(g.shiftKey||g.altKey){const j=m.getBoundingClientRect(),k=(g.clientX-j.left)/m.offsetWidth,E=n+k*r,y=g.deltaY<0?1/p:p,C=Math.max(c,Math.min(d,r*y));if(C===r)return;const L=E-k*C;s(C),o(L)}else{const j=(g.deltaX+g.deltaY)/m.offsetWidth*r;o(n+j)}},[h,n,r,o,s,c,d,p]);return a.jsx("div",{ref:f,className:t,onWheel:x,children:l})}function Kt({left:e=0,label:t,color:n,showReadout:r=!1,showMagnet:o=!1,variant:s="active",zIndex:c=20}){const d=`${e}%`,p=n||(s==="active"?"rgb(239 68 68)":"rgb(148 163 184)");return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"pointer-events-none absolute top-0 z-75 h-full w-px",style:{left:d,backgroundColor:p,zIndex:c}}),r&&a.jsxs("div",{className:A("absolute top-1","flex items-center justify-center",s==="active"?"pointer-events-none":"pointer-events-auto","px-2 py-0.5","text-uk-sm z-80","border-line-primary/50",s==="active"&&["bg-bg-primary rounded-uk-sm border","shadow-[0_4px_16px_0_var(--color-shadow-secondary)]"],s==="static"&&["bg-bg-secondary backdrop-blur-sm","rounded-uk-sm","text-text-secondary"]),style:{left:d,transform:"translateX(-50%)",minWidth:"11ch",zIndex:c},children:[o&&a.jsx(Er,{className:"text-text-secondary mr-1.5 size-3 transition-opacity"}),a.jsx("span",{className:"font-mono tabular-nums",children:t})]})]})}function ho({viewDuration:e,handlePan:t,handleZoomDragStart:n}){return a.jsx("div",{className:"sticky left-1/2 z-20 w-max",children:a.jsxs("div",{className:"bg-bg-primary/75 liquid-dark:liquid-dark-bg liquid-light:liquid-light-bg flex items-center gap-2 rounded-full p-1 text-sm shadow-[0_4px_16px_0_var(--color-shadow-secondary)] backdrop-blur-[2px]",children:[a.jsx("button",{onClick:()=>t("left"),className:"hover:bg-bg-secondary rounded-full p-1",children:a.jsx(hn,{className:"size-4"})}),a.jsx("span",{className:"text-uk-sm hover:bg-bg-secondary/50 w-24 cursor-col-resize rounded px-1 py-0.5 text-center font-mono transition-colors select-none",onMouseDown:n,children:Ot(e)}),a.jsx("button",{onClick:()=>t("right"),className:"hover:bg-bg-secondary rounded-full p-1",children:a.jsx(Cr,{className:"size-4"})})]})})}function go({time:e,label:t,timeToPercent:n,zIndex:r=10}){const o=n(e);if(o<-20||o>120)return null;const s=3,c=Math.min(100-s,Math.max(s,o));return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-line-primary absolute top-0 h-full w-px",style:{left:`${o}%`}}),a.jsx("div",{className:"bg-bg-primary liquid-dark:liquid-dark-bg liquid-light:liquid-light-bg text-text-secondary rounded-uk-xs text-uk-sm pointer-events-none absolute top-1/2 -translate-x-1/2 -translate-y-1/2 px-1 backdrop-blur-sm",style:{left:`${c}%`,zIndex:r},children:t})]})}function vo({percent:e}){return e<0||e>100?null:a.jsx("div",{className:"bg-bg-tertiary absolute top-1/2 z-0 h-1 w-1 -translate-y-1/2 rounded-full",style:{left:`${e}%`}})}var Nn=u.createContext(null);function xo({children:e}){const t=u.useRef(new Map),n=u.useRef(new Set),r=u.useCallback((c,d,p)=>{t.current.set(c,{ref:d,role:p})},[]),o=u.useCallback(c=>{t.current.delete(c),n.current.delete(c)},[]),s=u.useCallback((c,d,p)=>{if(n.current.has(c))return;const h=t.current.get(c);h&&(t.current.forEach((l,i)=>{i!==c&&(h.role==="master"||h.role==="drag")&&(n.current.add(i),l.ref.current&&(l.ref.current.scrollTop=d,l.ref.current.scrollLeft=p))}),requestAnimationFrame(()=>{n.current.clear()}))},[]);return a.jsx(Nn.Provider,{value:{registerScrollable:r,unregisterScrollable:o,syncScroll:s},children:e})}function It({id:e,role:t,enabled:n=!0,axis:r="vertical",ref:o}){const s=u.useContext(Nn),c=u.useId(),d=e||c,p=u.useRef(null),h=o||p,l=u.useRef(0),i=u.useRef(0);if(!s)throw new Error("Sync scroll hooks must be used within a SyncScrollProvider");const{registerScrollable:f,unregisterScrollable:x,syncScroll:g}=s;return u.useEffect(()=>{if(!n||!h.current)return;const m=h.current;f(d,h,t);const j=v=>{const k=v.target;let E=!1;(r==="vertical"||r==="both")&&k.scrollTop!==l.current&&(l.current=k.scrollTop,E=!0),(r==="horizontal"||r==="both")&&k.scrollLeft!==i.current&&(i.current=k.scrollLeft,E=!0),E&&g(d,l.current,i.current)};return m.addEventListener("scroll",j,{passive:!0}),()=>{m.removeEventListener("scroll",j),x(d)}},[d,t,n,r,f,x,g,h]),h}function wo(e={}){return It({...e,role:"master"})}function yo(e={}){return It({...e,role:"slave"})}function bo(e={}){return It({...e,role:"drag"})}var So=({children:e,className:t,asChild:n=!1,...r})=>{const o=n?Ve:"div";return a.jsx(o,{ref:wo(),className:A("overflow-y-auto",t),...r,children:e})},Gt=({children:e,className:t,asChild:n=!1,...r})=>{const o=n?Ve:"div";return a.jsx(o,{ref:yo(),className:A("overflow-y-auto",t),...r,children:e})},jo=({ref:e,children:t,className:n,asChild:r=!1,...o})=>{const s=bo({ref:e,axis:"vertical"}),[c,d]=u.useState(!1),p=u.useRef(0),h=u.useRef(0);u.useEffect(()=>{const i=s.current;if(!i)return;const f=m=>{d(!0),p.current=m.clientY,h.current=i.scrollTop,m.preventDefault()},x=m=>{if(!c||!i)return;const j=m.clientY-p.current;i.scrollTop=h.current-j*2},g=()=>{d(!1)};return i.addEventListener("mousedown",f),c&&(document.addEventListener("mousemove",x),document.addEventListener("mouseup",g),document.addEventListener("mouseleave",g)),()=>{i.removeEventListener("mousedown",f),document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",g),document.removeEventListener("mouseleave",g)}},[c,s]);const l=r?Ve:"div";return a.jsx(l,{ref:s,className:A("cursor-grab overflow-x-hidden overflow-y-auto",c&&"cursor-grabbing",n),style:{userSelect:c?"none":"auto",...o.style},...o,children:t})};function To({logData:e,temporalCursor:t,onTemporalCursorChange:n,getIcon:r,panelWidth:o=300,className:s,hoveredId:c,onItemHover:d,minWindow:p=.01,maxWindow:h,zoomFactor:l=1.1,enabled:i=!0,children:f}){const[x,g]=u.useState([]),[m,j]=u.useState([]),[v,k]=u.useState(""),[E,y]=u.useState(!1),[C,L]=u.useState(!1),b=ao(e),O=c??b.hoveredId,R=d??b.setHoveredId,{visibleData:D,expandedItems:_,toggleItem:G,hasDescendants:N,dataWithMeta:q}=Rr({data:e,defaultExpanded:!0}),{filteredData:S,searchResultsCount:M,isRegexValid:$,renderLabel:I,hasActiveSearch:F}=Nr({data:e,searchQuery:v,isCaseSensitive:E,isRegex:C});u.useEffect(()=>{const T=F?q.filter(Z=>S.some(he=>he.id===Z.id)):D;g(T)},[S,D,q,F]);const{viewStart:Y,viewDuration:z,timelineContainerRef:X,timeToPercent:B,ticks:te,eventDots:K,handlePan:H,handleZoomDragStart:re,setViewStart:oe,setViewDuration:ie,cursorVisible:xe,cursorPosition:we,cursorLabel:qe,showMagnet:Ye}=io({visibleLogData:x,onTemporalCursorChange:n,temporalCursor:t});return a.jsx(Rn,{children:a.jsx(xo,{children:a.jsx("div",{className:A("bg-bg-primary","liquid-dark:liquid-dark-bg","liquid-dark:border-[0.9px]","liquid-dark:border-[rgba(85,85,85,100)]","liquid-light:liquid-light-bg","liquid-light:border-[0.8px]","liquid-light:border-[white]","text-text-primary","rounded-uk-lg","mx-auto","flex","w-full","flex-col","overflow-hidden","font-sans","shadow-[0_4px_16px_0_var(--color-shadow-secondary)]",s),children:a.jsxs("div",{className:"relative flex h-full flex-row items-stretch",children:[a.jsxs("div",{className:"border-line-primary/50 relative flex h-full flex-none flex-col border-r",style:{width:o},children:[a.jsx(Mr,{className:"p-1",searchQuery:v,setSearchQuery:k,isCaseSensitive:E,setIsCaseSensitive:y,isRegex:C,setIsRegex:L,isRegexValid:$,searchResultsCount:M}),a.jsx(So,{className:"flex-1 overflow-y-auto",children:a.jsx(Dr,{data:F?q.filter(T=>S.some(Z=>Z.id===T.id)):D,getIcon:r,expandedItems:_,onToggleItem:G,onItemHover:R,hoveredId:O,hasDescendants:N,renderLabel:I})})]}),a.jsxs("div",{ref:X,className:"overflow-y-none scrollbar-hide relative flex h-full w-full flex-auto cursor-crosshair flex-col overflow-x-hidden pl-px active:cursor-grabbing",children:[a.jsx("div",{className:"sticky top-0",children:a.jsxs("div",{className:"border-line-primary/50 relative h-8 border-b",children:[te.map((T,Z)=>a.jsx(go,{time:T.time,label:T.label,timeToPercent:B,zIndex:Z<te.length-1?10:0},T.time)),K.map(({time:T},Z)=>a.jsx(vo,{percent:B(T)},`snap-${T}-${Z}`))]})}),a.jsxs(mo,{className:"scrollbar-hide relative h-full max-h-full overflow-auto",viewStart:Y,viewDuration:z,onViewStartChange:oe,onWindowChange:ie,minWindow:p,maxWindow:h??et*10,zoomFactor:l,enabled:i,children:[a.jsx(jo,{className:"scrollbar-hide hide-scrollbar relative h-full w-full",children:x.map((T,Z)=>T.time===void 0?a.jsx(uo,{index:Z,item:T,isHovered:O===T.id,onMouseEnter:()=>R(T.id),onMouseLeave:()=>R(null),onClick:he=>{j(ye=>[...ye,he])},viewStart:Y,viewWindow:z,timeToPercent:B},T.id):a.jsx(lo,{item:T,isHovered:O===T.id,onMouseEnter:()=>R(T.id),onMouseLeave:()=>R(null),onClick:he=>{j(ye=>[...ye,he])},timeToPercent:B,index:Z},T.id))}),a.jsx(Gt,{className:"scrollbar-hide pointer-events-none absolute top-0 left-0 z-10 h-full w-2",children:x.map((T,Z)=>a.jsx(fo,{item:T,classes:so,viewStart:Y,index:Z},`left-wedge-${T.id}`))}),a.jsx(Gt,{className:"scrollbar-hide pointer-events-none absolute top-0 right-0 z-10 h-full w-2",children:x.map((T,Z)=>a.jsx(po,{item:T,classes:oo,viewEnd:Y+z,index:Z},`right-wedge-${T.id}`))}),f,a.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 justify-center pb-4",children:a.jsx(ho,{viewDuration:z,handlePan:H,handleZoomDragStart:re})})]}),m.map((T,Z)=>a.jsxs("div",{className:"pointer-events-none absolute top-0 h-8 w-20 cursor-pointer",style:{zIndex:110,left:`calc(${B(T)}% - 2.5rem)`},onClick:()=>{j(he=>he.filter((ye,ut)=>ut!==Z))},title:"Click to remove marker",children:[a.jsx("div",{className:"pointer-events-auto relative h-full w-full"}),a.jsx(Kt,{left:50,label:`T${Z+1}`,color:"#3b82f6",showReadout:!0,variant:"static",zIndex:110})]},`marker-${T}-${Z}`)),xe&&a.jsx(Kt,{left:we,label:qe,color:"#ef4444",showReadout:!0,showMagnet:Ye,className:"transition-opacity duration-150",zIndex:100})]})]})})})})}var ko=({strokeWidth:e=2.25})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mouse-pointer2-icon lucide-mouse-pointer-2",children:a.jsx("path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z"})}),Eo=({strokeWidth:e=2.25})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:e/2,className:"lucide lucide-mouse-pointer2-icon lucide-mouse-pointer-2",children:a.jsx("path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z"})}),Co=Re(["rounded-uk-md","relative","inline-flex","items-center"],{variants:{variant:{primary:"bg-bg-secondary",secondary:"bg-bg-secondary",ghost:"bg-transparent"},padding:{true:"p-xs",false:"p-0"}},defaultVariants:{variant:"primary",padding:!0}}),Ro=Re(["pointer-events-none","absolute","transition-all","duration-200","ease-out"],{variants:{variant:{primary:["bg-brand-primary","shadow-sm","rounded-uk-sm"],secondary:["bg-bg-primary","shadow-sm","rounded-uk-sm"],ghost:["bg-bg-secondary","shadow-sm","rounded-uk-md"]}},defaultVariants:{variant:"primary"}}),No=Re(["focus-visible:ring-ring","relative","z-10","inline-flex","items-center","justify-center","font-normal","whitespace-nowrap","transition-colors","focus-visible:ring-2","focus-visible:outline-none","disabled:pointer-events-none","disabled:opacity-50","cursor-pointer"],{variants:{variant:{primary:["text-text-primary","hover:text-text-primary","active:text-brand-primary","data-[selected=true]:text-text-withbg"],secondary:["text-text-primary","hover:text-text-secondary","active:text-brand-primary","data-[selected=true]:text-text-highlight","data-[selected=true]:bg-bg-primary"],ghost:["text-text-tertiary","hover:text-text-secondary","active:text-brand-primary","data-[selected=true]:text-text-highlight","data-[selected=true]:bg-bg-secondary"]},size:{sm:"text-uk-sm gap-xxs",md:"text-uk-md gap-xs",lg:"text-uk-lg gap-xs"},icon:{false:"",true:"shrink-0 [&_svg]:shrink-0 [&_svg]:pointer-events-none"},corner:{sm:"rounded-uk-sm",md:"rounded-uk-md"}},compoundVariants:[{size:"sm",icon:!1,class:"h-6 px-md"},{size:"md",icon:!1,class:"h-7 px-lg"},{size:"lg",icon:!1,class:"h-8 px-xl"},{size:"sm",icon:!0,class:"size-6 p-xs"},{size:"md",icon:!0,class:"size-8 p-sm"},{size:"lg",icon:!0,class:"size-9 p-md"}],defaultVariants:{variant:"primary",size:"md",icon:!1,corner:"sm"}}),Mn=u.createContext(null),Dn=u.forwardRef(({value:e,onValueChange:t,children:n,className:r,size:o="md",padding:s=!0,variant:c="primary",...d},p)=>{const h=u.useRef(null),[l,i]=u.useState(new Map),[f,x]=u.useState({opacity:0}),g=u.useCallback((j,v)=>{i(k=>new Map(k).set(j,v))},[]),m=u.useCallback(j=>{i(v=>{const k=new Map(v);return k.delete(j),k})},[]);return u.useEffect(()=>{const j=l.get(e),v=h.current;if(j&&v){const k=requestAnimationFrame(()=>{const E=v.getBoundingClientRect(),y=j.getBoundingClientRect(),C=s?4:0,L=y.left-E.left-C,b=y.top-E.top-C;x({width:y.width,height:y.height,transform:`translate(${L}px, ${b}px)`,opacity:1})});return()=>cancelAnimationFrame(k)}else x(k=>({...k,opacity:0}))},[e,l,s]),a.jsx(Mn.Provider,{value:{value:e,onValueChange:t,size:o,variant:c,registerItem:g,unregisterItem:m},children:a.jsxs("div",{ref:j=>{h.current=j,typeof p=="function"?p(j):p&&(p.current=j)},className:A(Co({variant:c,padding:s}),r),...d,children:[a.jsx("div",{className:A(Ro({variant:c})),style:f}),n]})})});Dn.displayName="ToggleButtons";var nt=u.forwardRef(({value:e,children:t,className:n,asChild:r=!1,icon:o=!1,size:s,variant:c,corner:d,...p},h)=>{const l=u.useContext(Mn),i=u.useRef(null);if(!l)throw new Error("ToggleButton must be used within ToggleButtons");const{value:f,onValueChange:x,size:g,variant:m,registerItem:j,unregisterItem:v}=l,k=f===e,E=s??g,y=c??m,C=d??(y==="ghost"?"md":"sm"),L=r?Ve:"button";return u.useEffect(()=>{const b=i.current;if(b)return j(e,b),()=>v(e)},[e,j,v]),a.jsx(L,{ref:b=>{i.current=b,typeof h=="function"?h(b):h&&(h.current=b)},...p,"data-selected":k,className:A(No({variant:y,size:E,icon:o,corner:C}),n),onClick:()=>x(e),type:r?void 0:"button",children:t})});nt.displayName="ToggleButton";var Pn="Toggle",On=u.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:o,...s}=e,[c,d]=Na({prop:n,onChange:o,defaultProp:r??!1,caller:Pn});return a.jsx(za.button,{type:"button","aria-pressed":c,"data-state":c?"on":"off","data-disabled":e.disabled?"":void 0,...s,ref:t,onClick:Ma(e.onClick,()=>{e.disabled||d(!c)})})});On.displayName=Pn;var Mo=On,Do=Re(["inline-flex","items-center","justify-center","shrink-0","whitespace-nowrap","font-normal","transition-all","[&_svg]:shrink-0 ","[&_svg]:pointer-events-none","outline-none","disabled:bg-transparent","disabled:text-bg-tertiary","disabled:cursor-not-allowed"],{variants:{variant:{primary:["text-text-primary","data-[state=on]:text-text-withbg","data-[state=on]:bg-brand-primary","hover:bg-bg-secondary"],secondary:["text-text-secondary","data-[state=on]:text-text-highlight","data-[state=on]:bg-bg-secondary","hover:bg-bg-secondary "]},size:{sm:["text-uk-sm","leading-uk-sm","gap-xxs","p-xs","[&_svg:not([class*='size-'])]:size-3","rounded-uk-xs"],base:["text-uk-md","leading-uk-md","gap-xs","p-sm","[&_svg:not([class*='size-'])]:size-4","rounded-uk-sm"],lg:["text-uk-lg","leading-uk-lg","gap-xs","p-md","[&_svg:not([class*='size-'])]:size-5","rounded-uk-md"]}},defaultVariants:{variant:"primary",size:"base"}});function Po({className:e,variant:t,size:n,...r}){return a.jsx(Mo,{"data-slot":"toggle",className:A(Do({variant:t,size:n,className:e})),...r})}function At({className:e,children:t,variant:n="default",size:r="md"}){return a.jsx("div",{className:A("flex items-center gap-2","liquid-dark:liquid-dark-bg","liquid-dark:border-[0.9px]","liquid-dark:border-[rgba(85,85,85,100)]","liquid-light:liquid-light-bg","liquid-light:border-[0.8px]","liquid-light:border-[white]","liquid:shadow-[0_4px_16px_0_var(--color-shadow-secondary)]",n!=="floating"&&"bg-bg-primary",n!=="floating"&&r==="sm"&&"rounded-uk-md p-1.5",n!=="floating"&&r==="md"&&"rounded-uk-lg p-1.5",n!=="floating"&&r==="lg"&&"rounded-uk-xl p-1.5",n==="floating"&&["rounded-[var(--radius-uk-md)] bg-white dark:bg-gray-900",r==="sm"&&"px-1 py-1",r==="md"&&"px-[0.6em] py-2",r==="lg"&&"px-3 py-3"],e),children:t})}function st({className:e,children:t}){return a.jsx("div",{className:A("flex items-center gap-1",e),children:t})}function rt({className:e}){return a.jsx("div",{className:A("bg-line-primary mx-2 h-3.5 w-0.75 rounded-full",e)})}function Oo({...e}){return a.jsx(Sn,{"data-slot":"modal",...e})}function Io({...e}){return a.jsx(En,{"data-slot":"modal-portal",...e})}function Ao({...e}){return a.jsx(Tn,{"data-slot":"modal-close",...e})}var $o=Re(["fixed","inset-0","z-10","bg-bg-mask","transition-all","duration-200"]);function Lo({className:e,...t}){return a.jsx(Cn,{"data-slot":"modal-overlay",className:A($o(),e),...t})}var Fo=Re(["pb-xl","px-xl","bg-bg-primary","rounded-uk-xl","shadow-[0_4px_16px_0_var(--color-shadow-secondary)]","duration-200","transition-all","fixed","translate-x-[-50%]","translate-y-[-50%]","z-11","left-1/2","top-1/2","data-[state=open]:animate-in","data-[state=closed]:animate-out","data-[state=closed]:fade-out-0","data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95","data-[state=open]:zoom-in-95","liquid-dark:liquid-dark-bg","liquid-light:liquid-light-bg"]);function zo({className:e,children:t,showCloseButton:n=!0,...r}){return a.jsxs(Io,{children:[a.jsx(Lo,{}),a.jsxs(jn,{"data-slot":"modal-content",className:A(Fo(),e),...r,children:[t,n&&a.jsxs(Tn,{"data-slot":"modal-close",className:A("absolute","right-[16px]","top-[16px]","w-[16px]","h-[16px]","rounded-uk-sm","cursor-pointer","hover:text-icon-highlight","text-icon-primary","flex","items-center","justify-center"),children:[a.jsx(Da,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Uo({className:e,...t}){return a.jsx("div",{"data-slot":"modal-header",className:A("flex flex-col",e),...t})}function _o({className:e,...t}){return a.jsx(kn,{"data-slot":"modal-title",className:A("text-text-highlight","text-uk-lg","leading-uk-lg","font-medium","py-lg","px-xl","text-center",e),...t})}function Vo({className:e,...t}){return a.jsx("div",{"data-slot":"modal-footer",className:A("w-full","flex","justify-end","gap-xs",e),...t})}function Bo(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const In=w.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),He=()=>{const e=w.useContext(In);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};Bo(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Ho(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function Wo(){return $t(/^Mac/)}function qo(){return $t(/^iPhone/)}function Zt(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Yo(){return $t(/^iPad/)||Wo()&&navigator.maxTouchPoints>1}function An(){return qo()||Yo()}function $t(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const Xo=24,Qo=typeof window<"u"?u.useLayoutEffect:u.useEffect;function Jt(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const ft=typeof document<"u"&&window.visualViewport;function en(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function $n(e){for(en(e)&&(e=e.parentElement);e&&!en(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const Ko=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Ke=0,pt;function Go(e={}){let{isDisabled:t}=e;Qo(()=>{if(!t)return Ke++,Ke===1&&An()&&(pt=Zo()),()=>{Ke--,Ke===0&&pt?.()}},[t])}function Zo(){let e,t=0,n=i=>{e=$n(i.target),!(e===document.documentElement&&e===document.body)&&(t=i.changedTouches[0].pageY)},r=i=>{if(!e||e===document.documentElement||e===document.body){i.preventDefault();return}let f=i.changedTouches[0].pageY,x=e.scrollTop,g=e.scrollHeight-e.clientHeight;g!==0&&((x<=0&&f>t||x>=g&&f<t)&&i.preventDefault(),t=f)},o=i=>{let f=i.target;Ct(f)&&f!==document.activeElement&&(i.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))},s=i=>{let f=i.target;Ct(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",ft&&(ft.height<window.innerHeight?requestAnimationFrame(()=>{tn(f)}):ft.addEventListener("resize",()=>tn(f),{once:!0}))}))},c=()=>{window.scrollTo(0,0)},d=window.pageXOffset,p=window.pageYOffset,h=Jt(Jo(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let l=Jt(Ae(document,"touchstart",n,{passive:!1,capture:!0}),Ae(document,"touchmove",r,{passive:!1,capture:!0}),Ae(document,"touchend",o,{passive:!1,capture:!0}),Ae(document,"focus",s,!0),Ae(window,"scroll",c));return()=>{h(),l(),window.scrollTo(d,p)}}function Jo(e,t,n){let r=e.style[t];return e.style[t]=n,()=>{e.style[t]=r}}function Ae(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}function tn(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=$n(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let r=n.getBoundingClientRect().top,o=e.getBoundingClientRect().top,s=e.getBoundingClientRect().bottom;const c=n.getBoundingClientRect().bottom+Xo;s>c&&(n.scrollTop+=o-r)}e=n.parentElement}}function Ct(e){return e instanceof HTMLInputElement&&!Ko.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function es(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ts(...e){return t=>e.forEach(n=>es(n,t))}function Ln(...e){return u.useCallback(ts(...e),e)}const Fn=new WeakMap;function ne(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let r={};Object.entries(t).forEach(([o,s])=>{if(o.startsWith("--")){e.style.setProperty(o,s);return}r[o]=e.style[o],e.style[o]=s}),!n&&Fn.set(e,r)}function ns(e,t){if(!e||!(e instanceof HTMLElement))return;let n=Fn.get(e);n&&(e.style[t]=n[t])}const ee=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Ge(e,t){if(!e)return null;const n=window.getComputedStyle(e),r=n.transform||n.webkitTransform||n.mozTransform;let o=r.match(/^matrix3d\((.+)\)$/);return o?parseFloat(o[1].split(", ")[ee(t)?13:12]):(o=r.match(/^matrix\((.+)\)$/),o?parseFloat(o[1].split(", ")[ee(t)?5:4]):null)}function rs(e){return 8*(Math.log(e+1)-2)}function mt(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function as(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const Q={DURATION:.5,EASE:[.32,.72,0,1]},zn=.4,os=.25,ss=100,Un=8,Ee=16,Rt=26,ht="vaul-dragging";function _n(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function is({defaultProp:e,onChange:t}){const n=w.useState(e),[r]=n,o=w.useRef(r),s=_n(t);return w.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}function Vn({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=is({defaultProp:t,onChange:n}),s=e!==void 0,c=s?e:r,d=_n(n),p=w.useCallback(h=>{if(s){const i=typeof h=="function"?h(e):h;i!==e&&d(i)}else o(h)},[s,e,o,d]);return[c,p]}function ls({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:r,overlayRef:o,fadeFromIndex:s,onSnapPointChange:c,direction:d="bottom",container:p,snapToSequentialPoint:h}){const[l,i]=Vn({prop:e,defaultProp:n?.[0],onChange:t}),[f,x]=w.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);w.useEffect(()=>{function b(){x({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const g=w.useMemo(()=>l===n?.[n.length-1]||null,[n,l]),m=w.useMemo(()=>{var b;return(b=n?.findIndex(O=>O===l))!=null?b:null},[n,l]),j=n&&n.length>0&&(s||s===0)&&!Number.isNaN(s)&&n[s]===l||!n,v=w.useMemo(()=>{const b=p?{width:p.getBoundingClientRect().width,height:p.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var O;return(O=n?.map(R=>{const D=typeof R=="string";let _=0;if(D&&(_=parseInt(R,10)),ee(d)){const N=D?_:f?R*b.height:0;return f?d==="bottom"?b.height-N:-b.height+N:N}const G=D?_:f?R*b.width:0;return f?d==="right"?b.width-G:-b.width+G:G}))!=null?O:[]},[n,f,p]),k=w.useMemo(()=>m!==null?v?.[m]:null,[v,m]),E=w.useCallback(b=>{var O;const R=(O=v?.findIndex(D=>D===b))!=null?O:null;c(R),ne(r.current,{transition:`transform ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,transform:ee(d)?`translate3d(0, ${b}px, 0)`:`translate3d(${b}px, 0, 0)`}),v&&R!==v.length-1&&s!==void 0&&R!==s&&R<s?ne(o.current,{transition:`opacity ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,opacity:"0"}):ne(o.current,{transition:`opacity ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,opacity:"1"}),i(n?.[Math.max(R,0)])},[r.current,n,v,s,o,i]);w.useEffect(()=>{if(l||e){var b;const O=(b=n?.findIndex(R=>R===e||R===l))!=null?b:-1;v&&O!==-1&&typeof v[O]=="number"&&E(v[O])}},[l,e,n,v,E]);function y({draggedDistance:b,closeDrawer:O,velocity:R,dismissible:D}){if(s===void 0)return;const _=d==="bottom"||d==="right"?(k??0)-b:(k??0)+b,G=m===s-1,N=m===0,q=b>0;if(G&&ne(o.current,{transition:`opacity ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`}),!h&&R>2&&!q){D?O():E(v[0]);return}if(!h&&R>2&&q&&v&&n){E(v[n.length-1]);return}const S=v?.reduce(($,I)=>typeof $!="number"||typeof I!="number"?$:Math.abs(I-_)<Math.abs($-_)?I:$),M=ee(d)?window.innerHeight:window.innerWidth;if(R>zn&&Math.abs(b)<M*.4){const $=q?1:-1;if($>0&&g&&n){E(v[n.length-1]);return}if(N&&$<0&&D&&O(),m===null)return;E(v[m+$]);return}E(S)}function C({draggedDistance:b}){if(k===null)return;const O=d==="bottom"||d==="right"?k-b:k+b;(d==="bottom"||d==="right")&&O<v[v.length-1]||(d==="top"||d==="left")&&O>v[v.length-1]||ne(r.current,{transform:ee(d)?`translate3d(0, ${O}px, 0)`:`translate3d(${O}px, 0, 0)`})}function L(b,O){if(!n||typeof m!="number"||!v||s===void 0)return null;const R=m===s-1;if(m>=s&&O)return 0;if(R&&!O)return 1;if(!j&&!R)return null;const _=R?m+1:m-1,G=R?v[_]-v[_-1]:v[_+1]-v[_],N=b/Math.abs(G);return R?1-N:N}return{isLastSnapPoint:g,activeSnapPoint:l,shouldFade:j,getPercentageDragged:L,setActiveSnapPoint:i,activeSnapPointIndex:m,onRelease:y,onDrag:C,snapPointsOffset:v}}const cs=()=>()=>{};function us(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:r,noBodyStyles:o}=He(),s=w.useRef(null),c=u.useMemo(()=>document.body.style.backgroundColor,[]);function d(){return(window.innerWidth-Rt)/window.innerWidth}w.useEffect(()=>{if(t&&n){s.current&&clearTimeout(s.current);const p=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!p)return;as(r&&!o?mt(document.body,{background:"black"}):cs,mt(p,{transformOrigin:ee(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${Q.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Q.EASE.join(",")})`}));const h=mt(p,{borderRadius:`${Un}px`,overflow:"hidden",...ee(e)?{transform:`scale(${d()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${d()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{h(),s.current=window.setTimeout(()=>{c?document.body.style.background=c:document.body.style.removeProperty("background")},Q.DURATION*1e3)}}},[t,n,c])}let $e=null;function ds({isOpen:e,modal:t,nested:n,hasBeenOpened:r,preventScrollRestoration:o,noBodyStyles:s}){const[c,d]=w.useState(()=>typeof window<"u"?window.location.href:""),p=w.useRef(0),h=w.useCallback(()=>{if(Zt()&&$e===null&&e&&!s){$e={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:i,innerHeight:f}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-p.current}px`,left:`${-i}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const x=f-window.innerHeight;x&&p.current>=f&&(document.body.style.top=`${-(p.current+x)}px`)}),300)}},[e]),l=w.useCallback(()=>{if(Zt()&&$e!==null&&!s){const i=-parseInt(document.body.style.top,10),f=-parseInt(document.body.style.left,10);Object.assign(document.body.style,$e),window.requestAnimationFrame(()=>{if(o&&c!==window.location.href){d(window.location.href);return}window.scrollTo(f,i)}),$e=null}},[c]);return w.useEffect(()=>{function i(){p.current=window.scrollY}return i(),window.addEventListener("scroll",i),()=>{window.removeEventListener("scroll",i)}},[]),w.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||l()}},[t,l]),w.useEffect(()=>{n||!r||(e?(!window.matchMedia("(display-mode: standalone)").matches&&h(),t||window.setTimeout(()=>{l()},500)):l())},[e,r,c,t,n,h,l]),{restorePositionSetting:l}}function fs({open:e,onOpenChange:t,children:n,onDrag:r,onRelease:o,snapPoints:s,shouldScaleBackground:c=!1,setBackgroundColorOnScale:d=!0,closeThreshold:p=os,scrollLockTimeout:h=ss,dismissible:l=!0,handleOnly:i=!1,fadeFromIndex:f=s&&s.length-1,activeSnapPoint:x,setActiveSnapPoint:g,fixed:m,modal:j=!0,onClose:v,nested:k,noBodyStyles:E=!1,direction:y="bottom",defaultOpen:C=!1,disablePreventScroll:L=!0,snapToSequentialPoint:b=!1,preventScrollRestoration:O=!1,repositionInputs:R=!0,onAnimationEnd:D,container:_,autoFocus:G=!1}){var N,q;const[S=!1,M]=Vn({defaultProp:C,prop:e,onChange:P=>{t?.(P),!P&&!k&&sr(),setTimeout(()=>{D?.(P)},Q.DURATION*1e3),P&&!j&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),P||(document.body.style.pointerEvents="auto")}}),[$,I]=w.useState(!1),[F,Y]=w.useState(!1),[z,X]=w.useState(!1),B=w.useRef(null),te=w.useRef(null),K=w.useRef(null),H=w.useRef(null),re=w.useRef(null),oe=w.useRef(!1),ie=w.useRef(null),xe=w.useRef(0),we=w.useRef(!1),qe=w.useRef(!C),Ye=w.useRef(0),T=w.useRef(null),Z=w.useRef(((N=T.current)==null?void 0:N.getBoundingClientRect().height)||0),he=w.useRef(((q=T.current)==null?void 0:q.getBoundingClientRect().width)||0),ye=w.useRef(0),ut=w.useCallback(P=>{s&&P===Oe.length-1&&(te.current=new Date)},[]),{activeSnapPoint:nr,activeSnapPointIndex:Me,setActiveSnapPoint:Lt,onRelease:rr,snapPointsOffset:Oe,onDrag:ar,shouldFade:Ft,getPercentageDragged:or}=ls({snapPoints:s,activeSnapPointProp:x,setActiveSnapPointProp:g,drawerRef:T,fadeFromIndex:f,overlayRef:B,onSnapPointChange:ut,direction:y,container:_,snapToSequentialPoint:b});Go({isDisabled:!S||F||!j||z||!$||!R||!L});const{restorePositionSetting:sr}=ds({isOpen:S,modal:j,nested:k??!1,hasBeenOpened:$,preventScrollRestoration:O,noBodyStyles:E});function Xe(){return(window.innerWidth-Rt)/window.innerWidth}function ir(P){var V,W;!l&&!s||T.current&&!T.current.contains(P.target)||(Z.current=((V=T.current)==null?void 0:V.getBoundingClientRect().height)||0,he.current=((W=T.current)==null?void 0:W.getBoundingClientRect().width)||0,Y(!0),K.current=new Date,An()&&window.addEventListener("touchend",()=>oe.current=!1,{once:!0}),P.target.setPointerCapture(P.pointerId),xe.current=ee(y)?P.pageY:P.pageX)}function zt(P,V){var W;let U=P;const J=(W=window.getSelection())==null?void 0:W.toString(),le=T.current?Ge(T.current,y):null,se=new Date;if(U.tagName==="SELECT"||U.hasAttribute("data-vaul-no-drag")||U.closest("[data-vaul-no-drag]"))return!1;if(y==="right"||y==="left")return!0;if(te.current&&se.getTime()-te.current.getTime()<500)return!1;if(le!==null&&(y==="bottom"?le>0:le<0))return!0;if(J&&J.length>0)return!1;if(re.current&&se.getTime()-re.current.getTime()<h&&le===0||V)return re.current=se,!1;for(;U;){if(U.scrollHeight>U.clientHeight){if(U.scrollTop!==0)return re.current=new Date,!1;if(U.getAttribute("role")==="dialog")return!0}U=U.parentNode}return!0}function lr(P){if(T.current&&F){const V=y==="bottom"||y==="right"?1:-1,W=(xe.current-(ee(y)?P.pageY:P.pageX))*V,U=W>0,J=s&&!l&&!U;if(J&&Me===0)return;const le=Math.abs(W),se=document.querySelector("[data-vaul-drawer-wrapper]"),be=y==="bottom"||y==="top"?Z.current:he.current;let pe=le/be;const ke=or(le,U);if(ke!==null&&(pe=ke),J&&pe>=1||!oe.current&&!zt(P.target,U))return;if(T.current.classList.add(ht),oe.current=!0,ne(T.current,{transition:"none"}),ne(B.current,{transition:"none"}),s&&ar({draggedDistance:W}),U&&!s){const ge=rs(W),Qe=Math.min(ge*-1,0)*V;ne(T.current,{transform:ee(y)?`translate3d(0, ${Qe}px, 0)`:`translate3d(${Qe}px, 0, 0)`});return}const Se=1-pe;if((Ft||f&&Me===f-1)&&(r?.(P,pe),ne(B.current,{opacity:`${Se}`,transition:"none"},!0)),se&&B.current&&c){const ge=Math.min(Xe()+pe*(1-Xe()),1),Qe=8-pe*8,_t=Math.max(0,14-pe*14);ne(se,{borderRadius:`${Qe}px`,transform:ee(y)?`scale(${ge}) translate3d(0, ${_t}px, 0)`:`scale(${ge}) translate3d(${_t}px, 0, 0)`,transition:"none"},!0)}if(!s){const ge=le*V;ne(T.current,{transform:ee(y)?`translate3d(0, ${ge}px, 0)`:`translate3d(${ge}px, 0, 0)`})}}}w.useEffect(()=>{window.requestAnimationFrame(()=>{qe.current=!0})},[]),w.useEffect(()=>{var P;function V(){if(!T.current||!R)return;const W=document.activeElement;if(Ct(W)||we.current){var U;const J=((U=window.visualViewport)==null?void 0:U.height)||0,le=window.innerHeight;let se=le-J;const be=T.current.getBoundingClientRect().height||0,pe=be>le*.8;ye.current||(ye.current=be);const ke=T.current.getBoundingClientRect().top;if(Math.abs(Ye.current-se)>60&&(we.current=!we.current),s&&s.length>0&&Oe&&Me){const Se=Oe[Me]||0;se+=Se}if(Ye.current=se,be>J||we.current){const Se=T.current.getBoundingClientRect().height;let ge=Se;Se>J&&(ge=J-(pe?ke:Rt)),m?T.current.style.height=`${Se-Math.max(se,0)}px`:T.current.style.height=`${Math.max(ge,J-ke)}px`}else Ho()||(T.current.style.height=`${ye.current}px`);s&&s.length>0&&!we.current?T.current.style.bottom="0px":T.current.style.bottom=`${Math.max(se,0)}px`}}return(P=window.visualViewport)==null||P.addEventListener("resize",V),()=>{var W;return(W=window.visualViewport)==null?void 0:W.removeEventListener("resize",V)}},[Me,s,Oe]);function Ie(P){cr(),v?.(),P||M(!1),setTimeout(()=>{s&&Lt(s[0])},Q.DURATION*1e3)}function Ut(){if(!T.current)return;const P=document.querySelector("[data-vaul-drawer-wrapper]"),V=Ge(T.current,y);ne(T.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`}),ne(B.current,{transition:`opacity ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,opacity:"1"}),c&&V&&V>0&&S&&ne(P,{borderRadius:`${Un}px`,overflow:"hidden",...ee(y)?{transform:`scale(${Xe()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Xe()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${Q.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Q.EASE.join(",")})`},!0)}function cr(){!F||!T.current||(T.current.classList.remove(ht),oe.current=!1,Y(!1),H.current=new Date)}function ur(P){if(!F||!T.current)return;T.current.classList.remove(ht),oe.current=!1,Y(!1),H.current=new Date;const V=Ge(T.current,y);if(!P||!zt(P.target,!1)||!V||Number.isNaN(V)||K.current===null)return;const W=H.current.getTime()-K.current.getTime(),U=xe.current-(ee(y)?P.pageY:P.pageX),J=Math.abs(U)/W;if(J>.05&&(X(!0),setTimeout(()=>{X(!1)},200)),s){rr({draggedDistance:U*(y==="bottom"||y==="right"?1:-1),closeDrawer:Ie,velocity:J,dismissible:l}),o?.(P,!0);return}if(y==="bottom"||y==="right"?U>0:U<0){Ut(),o?.(P,!0);return}if(J>zn){Ie(),o?.(P,!1);return}var le;const se=Math.min((le=T.current.getBoundingClientRect().height)!=null?le:0,window.innerHeight);var be;const pe=Math.min((be=T.current.getBoundingClientRect().width)!=null?be:0,window.innerWidth),ke=y==="left"||y==="right";if(Math.abs(V)>=(ke?pe:se)*p){Ie(),o?.(P,!1);return}o?.(P,!0),Ut()}w.useEffect(()=>(S&&(ne(document.documentElement,{scrollBehavior:"auto"}),te.current=new Date),()=>{ns(document.documentElement,"scrollBehavior")}),[S]);function dr(P){const V=P?(window.innerWidth-Ee)/window.innerWidth:1,W=P?-Ee:0;ie.current&&window.clearTimeout(ie.current),ne(T.current,{transition:`transform ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,transform:ee(y)?`scale(${V}) translate3d(0, ${W}px, 0)`:`scale(${V}) translate3d(${W}px, 0, 0)`}),!P&&T.current&&(ie.current=setTimeout(()=>{const U=Ge(T.current,y);ne(T.current,{transition:"none",transform:ee(y)?`translate3d(0, ${U}px, 0)`:`translate3d(${U}px, 0, 0)`})},500))}function fr(P,V){if(V<0)return;const W=(window.innerWidth-Ee)/window.innerWidth,U=W+V*(1-W),J=-Ee+V*Ee;ne(T.current,{transform:ee(y)?`scale(${U}) translate3d(0, ${J}px, 0)`:`scale(${U}) translate3d(${J}px, 0, 0)`,transition:"none"})}function pr(P,V){const W=ee(y)?window.innerHeight:window.innerWidth,U=V?(W-Ee)/W:1,J=V?-Ee:0;V&&ne(T.current,{transition:`transform ${Q.DURATION}s cubic-bezier(${Q.EASE.join(",")})`,transform:ee(y)?`scale(${U}) translate3d(0, ${J}px, 0)`:`scale(${U}) translate3d(${J}px, 0, 0)`})}return w.useEffect(()=>{j||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[j]),w.createElement(Sn,{defaultOpen:C,onOpenChange:P=>{!l&&!P||(P?I(!0):Ie(!0),M(P))},open:S},w.createElement(In.Provider,{value:{activeSnapPoint:nr,snapPoints:s,setActiveSnapPoint:Lt,drawerRef:T,overlayRef:B,onOpenChange:t,onPress:ir,onRelease:ur,onDrag:lr,dismissible:l,shouldAnimate:qe,handleOnly:i,isOpen:S,isDragging:F,shouldFade:Ft,closeDrawer:Ie,onNestedDrag:fr,onNestedOpenChange:dr,onNestedRelease:pr,keyboardIsOpen:we,modal:j,snapPointsOffset:Oe,activeSnapPointIndex:Me,direction:y,shouldScaleBackground:c,setBackgroundColorOnScale:d,noBodyStyles:E,container:_,autoFocus:G}},n))}const Bn=w.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:r,onRelease:o,shouldFade:s,isOpen:c,modal:d,shouldAnimate:p}=He(),h=Ln(t,n),l=r&&r.length>0;if(!d)return null;const i=w.useCallback(f=>o(f),[o]);return w.createElement(Cn,{onMouseUp:i,ref:h,"data-vaul-overlay":"","data-vaul-snap-points":c&&l?"true":"false","data-vaul-snap-points-overlay":c&&s?"true":"false","data-vaul-animate":p?.current?"true":"false",...e})});Bn.displayName="Drawer.Overlay";const Hn=w.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...r},o){const{drawerRef:s,onPress:c,onRelease:d,onDrag:p,keyboardIsOpen:h,snapPointsOffset:l,activeSnapPointIndex:i,modal:f,isOpen:x,direction:g,snapPoints:m,container:j,handleOnly:v,shouldAnimate:k,autoFocus:E}=He(),[y,C]=w.useState(!1),L=Ln(o,s),b=w.useRef(null),O=w.useRef(null),R=w.useRef(!1),D=m&&m.length>0;us();const _=(N,q,S=0)=>{if(R.current)return!0;const M=Math.abs(N.y),$=Math.abs(N.x),I=$>M,F=["bottom","right"].includes(q)?1:-1;if(q==="left"||q==="right"){if(!(N.x*F<0)&&$>=0&&$<=S)return I}else if(!(N.y*F<0)&&M>=0&&M<=S)return!I;return R.current=!0,!0};w.useEffect(()=>{D&&window.requestAnimationFrame(()=>{C(!0)})},[]);function G(N){b.current=null,R.current=!1,d(N)}return w.createElement(jn,{"data-vaul-drawer-direction":g,"data-vaul-drawer":"","data-vaul-delayed-snap-points":y?"true":"false","data-vaul-snap-points":x&&D?"true":"false","data-vaul-custom-container":j?"true":"false","data-vaul-animate":k?.current?"true":"false",...r,ref:L,style:l&&l.length>0?{"--snap-point-height":`${l[i??0]}px`,...t}:t,onPointerDown:N=>{v||(r.onPointerDown==null||r.onPointerDown.call(r,N),b.current={x:N.pageX,y:N.pageY},c(N))},onOpenAutoFocus:N=>{n?.(N),E||N.preventDefault()},onPointerDownOutside:N=>{if(e?.(N),!f||N.defaultPrevented){N.preventDefault();return}h.current&&(h.current=!1)},onFocusOutside:N=>{if(!f){N.preventDefault();return}},onPointerMove:N=>{if(O.current=N,v||(r.onPointerMove==null||r.onPointerMove.call(r,N),!b.current))return;const q=N.pageY-b.current.y,S=N.pageX-b.current.x,M=N.pointerType==="touch"?10:2;_({x:S,y:q},g,M)?p(N):(Math.abs(S)>M||Math.abs(q)>M)&&(b.current=null)},onPointerUp:N=>{r.onPointerUp==null||r.onPointerUp.call(r,N),b.current=null,R.current=!1,d(N)},onPointerOut:N=>{r.onPointerOut==null||r.onPointerOut.call(r,N),G(O.current)},onContextMenu:N=>{r.onContextMenu==null||r.onContextMenu.call(r,N),O.current&&G(O.current)}})});Hn.displayName="Drawer.Content";const ps=250,ms=120,hs=w.forwardRef(function({preventCycle:e=!1,children:t,...n},r){const{closeDrawer:o,isDragging:s,snapPoints:c,activeSnapPoint:d,setActiveSnapPoint:p,dismissible:h,handleOnly:l,isOpen:i,onPress:f,onDrag:x}=He(),g=w.useRef(null),m=w.useRef(!1);function j(){if(m.current){E();return}window.setTimeout(()=>{v()},ms)}function v(){if(s||e||m.current){E();return}if(E(),!c||c.length===0){h||o();return}if(d===c[c.length-1]&&h){o();return}const C=c.findIndex(b=>b===d);if(C===-1)return;const L=c[C+1];p(L)}function k(){g.current=window.setTimeout(()=>{m.current=!0},ps)}function E(){g.current&&window.clearTimeout(g.current),m.current=!1}return w.createElement("div",{onClick:j,onPointerCancel:E,onPointerDown:y=>{l&&f(y),k()},onPointerMove:y=>{l&&x(y)},ref:r,"data-vaul-drawer-visible":i?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},w.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});hs.displayName="Drawer.Handle";function gs(e){const t=He(),{container:n=t.container,...r}=e;return w.createElement(En,{container:n,...r})}const Ne={Root:fs,Content:Hn,Overlay:Bn,Trigger:Ea,Portal:gs,Title:kn,Description:Ca};function vs({...e}){return a.jsx(Ne.Root,{"data-slot":"drawer",...e})}function xs({...e}){return a.jsx(Ne.Trigger,{"data-slot":"drawer-trigger",...e})}function ws({...e}){return a.jsx(Ne.Portal,{"data-slot":"drawer-portal",...e})}function ys({className:e,...t}){return a.jsx(Ne.Overlay,{"data-slot":"drawer-overlay",className:A("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 bg-bg-mask fixed inset-0 z-50",e),...t})}function bs({className:e,children:t,...n}){return a.jsxs(ws,{"data-slot":"drawer-portal",children:[a.jsx(ys,{}),a.jsxs(Ne.Content,{"data-slot":"drawer-content",className:A("group/drawer-content bg-bg-primary liquid-dark:liquid-dark-bg liquid-light:liquid-light-bg p-xl fixed z-50 flex h-auto flex-col shadow-[0_4px_16px_0_var(--color-shadow-secondary)]","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh]","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:pt-0","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-[340px]","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-[340px]",e),...n,children:[a.jsx("div",{className:"bg-bg-quaternary rounded-uk-md mx-auto mt-[8px] hidden h-[4px] w-[80px] shrink-0 group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),t]})]})}function Ss({className:e,...t}){return a.jsx("div",{"data-slot":"drawer-header",className:A("gap-md pb-xl flex flex-col",e),...t})}function js({className:e,...t}){return a.jsx("div",{"data-slot":"drawer-footer",className:A("gap-lg pt-xl mt-auto flex flex-col",e),...t})}function Ts({className:e,...t}){return a.jsx(Ne.Title,{"data-slot":"drawer-title",className:A("text-text-highlight text-uk-xl leading-uk-xl font-medium",e),...t})}function ks({className:e,...t}){return a.jsx(Ne.Description,{"data-slot":"drawer-description",className:A("text-text-secondary text-uk-md leading-uk-md",e),...t})}var Es=Re(["inline-flex","items-center","justify-center","rounded-uk-sm","px-md","py-xxs","align-middle","text-xs","leading-uk-sm","w-fit","whitespace-nowrap","shrink-0","[&>svg]:size-3","[&>svg]:pointer-events-none","transition-[color,box-shadow]","overflow-hidden","text-text-withbg"],{variants:{variant:{default:"bg-brand-primary",secondary:"bg-bg-secondary text-text-primary",destructive:"bg-danger-primary",success:"bg-accent-success",warning:"bg-accent-warning"},type:{default:"",circle:"size-[18px] !rounded-full",dot:"size-[6px] rounded-full !px-0 !py-0 text-transparent"}},defaultVariants:{variant:"default",type:"default"}});function gt({className:e,variant:t,type:n,asChild:r=!1,...o}){const s=r?Ve:"span";return a.jsx(s,{"data-slot":"badge",className:A(Es({variant:t,type:n}),e),...o})}var Wn=async(e,t={})=>{const n=localStorage.getItem(mr)||"",r={...t.headers,Authorization:`Bearer ${n}`};return fetch(e,{...t,headers:r})};let vt;function Cs(){}function Rs(){return vt||(vt=u.createContext(null)),u.useCallback(()=>{const e=console.error;try{return console.error=Cs,u.useContext(vt),!0}catch{return!1}finally{console.error=e}},[])}const Ns=["refetch","fetchMore","updateQuery","startPolling","stopPolling","subscribeToMore"];function Ms(e,t){const n=qa(t?.client),r=u.useRef(void 0),o=u.useRef(void 0),s=Ya(()=>t,[t]),c=Rs();function d(){return n.watchQuery({...t,query:e,initialFetchPolicy:t?.fetchPolicy,fetchPolicy:"standby"})}const[p,h]=u.useState(n),[l,i]=u.useState(d);p!==n&&(h(n),i(d()));const f=u.useCallback((E,y)=>{const C=o.current?.data;C&&!Vt(C,E.data)&&(r.current=C),o.current=E,y()},[]),x=Xa(u.useCallback(E=>{const y=l.subscribe(C=>{Vt(o.current,C)||f(C,E)});return()=>{y.unsubscribe()}},[l,f]),()=>o.current||nn,()=>nn),g=u.useMemo(()=>{const E={};for(const y of Ns)E[y]=function(...C){return Bt(o.current,29,y),l[y](...C)};return E},[l]);u.useEffect(()=>{const E={query:e,errorPolicy:s?.errorPolicy,refetchWritePolicy:s?.refetchWritePolicy,returnPartialData:s?.returnPartialData,notifyOnNetworkStatusChange:s?.notifyOnNetworkStatusChange,nextFetchPolicy:t?.nextFetchPolicy,skipPollAttempt:t?.skipPollAttempt};l.options.fetchPolicy!=="standby"&&s?.fetchPolicy&&(E.fetchPolicy=s.fetchPolicy),l.applyOptions(E)},[e,l,s,t?.nextFetchPolicy,t?.skipPollAttempt]);const m=u.useCallback((...E)=>{Bt(!c(),30);const[y]=E;let C=l.options.fetchPolicy;return C==="standby"&&(C=l.options.initialFetchPolicy),l.reobserve({fetchPolicy:C,variables:y?.variables,context:y?.context??{}})},[l,c]),j=u.useRef(m);eo(()=>{j.current=m});const v=u.useCallback((...E)=>j.current(...E),[]),k=u.useMemo(()=>{const{partial:E,...y}=x;return{...g,...y,client:n,previousData:r.current,variables:l.variables,observable:l,called:!!o.current}},[n,x,g,l]);return[v,k]}const nn=hr({data:void 0,dataState:"empty",loading:!1,networkStatus:gr.ready,partial:!0});function Ds(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rn(Object(n),!0).forEach(function(r){Ds(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ps(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,s;for(s=0;s<r.length;s++)o=r[s],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Os(e,t){if(e==null)return{};var n=Ps(e,t),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Is(e,t){return As(e)||$s(e,t)||Ls(e,t)||Fs()}function As(e){if(Array.isArray(e))return e}function $s(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,s=void 0;try{for(var c=e[Symbol.iterator](),d;!(r=(d=c.next()).done)&&(n.push(d.value),!(t&&n.length===t));r=!0);}catch(p){o=!0,s=p}finally{try{!r&&c.return!=null&&c.return()}finally{if(o)throw s}}return n}}function Ls(e,t){if(e){if(typeof e=="string")return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return on(e,t)}}function on(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sn(Object(n),!0).forEach(function(r){zs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Us(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(o,s){return s(o)},r)}}function Fe(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return t.apply(n,[].concat(o,d))}}}function it(e){return{}.toString.call(e).includes("Object")}function _s(e){return!Object.keys(e).length}function Ue(e){return typeof e=="function"}function Vs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Bs(e,t){return it(t)||je("changeType"),Object.keys(t).some(function(n){return!Vs(e,n)})&&je("changeField"),t}function Hs(e){Ue(e)||je("selectorType")}function Ws(e){Ue(e)||it(e)||je("handlerType"),it(e)&&Object.values(e).some(function(t){return!Ue(t)})&&je("handlersType")}function qs(e){e||je("initialIsRequired"),it(e)||je("initialType"),_s(e)&&je("initialContent")}function Ys(e,t){throw new Error(e[t]||e.default)}var Xs={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},je=Fe(Ys)(Xs),Ze={changes:Bs,selector:Hs,handler:Ws,initial:qs};function Qs(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ze.initial(e),Ze.handler(t);var n={current:e},r=Fe(Zs)(n,t),o=Fe(Gs)(n),s=Fe(Ze.changes)(e),c=Fe(Ks)(n);function d(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(l){return l};return Ze.selector(h),h(n.current)}function p(h){Us(r,o,s,c)(h)}return[d,p]}function Ks(e,t){return Ue(t)?t(e.current):t}function Gs(e,t){return e.current=ln(ln({},e.current),t),t}function Zs(e,t,n){return Ue(t)?t(e.current):Object.keys(n).forEach(function(r){var o;return(o=t[r])===null||o===void 0?void 0:o.call(t,e.current[r])}),n}var Js={create:Qs},ei={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function ti(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return t.apply(n,[].concat(o,d))}}}function ni(e){return{}.toString.call(e).includes("Object")}function ri(e){return e||cn("configIsRequired"),ni(e)||cn("configType"),e.urls?(ai(),{paths:{vs:e.urls.monacoBase}}):e}function ai(){console.warn(qn.deprecation)}function oi(e,t){throw new Error(e[t]||e.default)}var qn={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},cn=ti(oi)(qn),si={config:ri},ii=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(o){return n.reduceRight(function(s,c){return c(s)},o)}};function Yn(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],Yn(e[n],t[n]))}),an(an({},e),t)}var li={type:"cancelation",msg:"operation is manually canceled"};function xt(e){var t=!1,n=new Promise(function(r,o){e.then(function(s){return t?o(li):r(s)}),e.catch(o)});return n.cancel=function(){return t=!0},n}var ci=Js.create({config:ei,isInitialized:!1,resolve:null,reject:null,monaco:null}),Xn=Is(ci,2),We=Xn[0],ct=Xn[1];function ui(e){var t=si.config(e),n=t.monaco,r=Os(t,["monaco"]);ct(function(o){return{config:Yn(o.config,r),monaco:n}})}function di(){var e=We(function(t){var n=t.monaco,r=t.isInitialized,o=t.resolve;return{monaco:n,isInitialized:r,resolve:o}});if(!e.isInitialized){if(ct({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),xt(wt);if(window.monaco&&window.monaco.editor)return Qn(window.monaco),e.resolve(window.monaco),xt(wt);ii(fi,mi)(hi)}return xt(wt)}function fi(e){return document.body.appendChild(e)}function pi(e){var t=document.createElement("script");return e&&(t.src=e),t}function mi(e){var t=We(function(r){var o=r.config,s=r.reject;return{config:o,reject:s}}),n=pi("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function hi(){var e=We(function(n){var r=n.config,o=n.resolve,s=n.reject;return{config:r,resolve:o,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){Qn(n),e.resolve(n)},function(n){e.reject(n)})}function Qn(e){We().monaco||ct({monaco:e})}function gi(){return We(function(e){var t=e.monaco;return t})}var wt=new Promise(function(e,t){return ct({resolve:e,reject:t})}),Kn={config:ui,init:di,__getMonacoInstance:gi},vi={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},yt=vi,xi={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},wi=xi;function yi({children:e}){return w.createElement("div",{style:wi.container},e)}var bi=yi,Si=bi;function ji({width:e,height:t,isEditorReady:n,loading:r,_ref:o,className:s,wrapperProps:c}){return w.createElement("section",{style:{...yt.wrapper,width:e,height:t},...c},!n&&w.createElement(Si,null,r),w.createElement("div",{ref:o,style:{...yt.fullWidth,...!n&&yt.hide},className:s}))}var Ti=ji,Gn=u.memo(Ti);function ki(e){u.useEffect(e,[])}var Zn=ki;function Ei(e,t,n=!0){let r=u.useRef(!0);u.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var ce=Ei;function ze(){}function De(e,t,n,r){return Ci(e,r)||Ri(e,t,n,r)}function Ci(e,t){return e.editor.getModel(Jn(e,t))}function Ri(e,t,n,r){return e.editor.createModel(t,n,r?Jn(e,r):void 0)}function Jn(e,t){return e.Uri.parse(t)}function Ni({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:o,originalModelPath:s,modifiedModelPath:c,keepCurrentOriginalModel:d=!1,keepCurrentModifiedModel:p=!1,theme:h="light",loading:l="Loading...",options:i={},height:f="100%",width:x="100%",className:g,wrapperProps:m={},beforeMount:j=ze,onMount:v=ze}){let[k,E]=u.useState(!1),[y,C]=u.useState(!0),L=u.useRef(null),b=u.useRef(null),O=u.useRef(null),R=u.useRef(v),D=u.useRef(j),_=u.useRef(!1);Zn(()=>{let S=Kn.init();return S.then(M=>(b.current=M)&&C(!1)).catch(M=>M?.type!=="cancelation"&&console.error("Monaco initialization: error:",M)),()=>L.current?q():S.cancel()}),ce(()=>{if(L.current&&b.current){let S=L.current.getOriginalEditor(),M=De(b.current,e||"",r||n||"text",s||"");M!==S.getModel()&&S.setModel(M)}},[s],k),ce(()=>{if(L.current&&b.current){let S=L.current.getModifiedEditor(),M=De(b.current,t||"",o||n||"text",c||"");M!==S.getModel()&&S.setModel(M)}},[c],k),ce(()=>{let S=L.current.getModifiedEditor();S.getOption(b.current.editor.EditorOption.readOnly)?S.setValue(t||""):t!==S.getValue()&&(S.executeEdits("",[{range:S.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),S.pushUndoStop())},[t],k),ce(()=>{L.current?.getModel()?.original.setValue(e||"")},[e],k),ce(()=>{let{original:S,modified:M}=L.current.getModel();b.current.editor.setModelLanguage(S,r||n||"text"),b.current.editor.setModelLanguage(M,o||n||"text")},[n,r,o],k),ce(()=>{b.current?.editor.setTheme(h)},[h],k),ce(()=>{L.current?.updateOptions(i)},[i],k);let G=u.useCallback(()=>{if(!b.current)return;D.current(b.current);let S=De(b.current,e||"",r||n||"text",s||""),M=De(b.current,t||"",o||n||"text",c||"");L.current?.setModel({original:S,modified:M})},[n,t,o,e,r,s,c]),N=u.useCallback(()=>{!_.current&&O.current&&(L.current=b.current.editor.createDiffEditor(O.current,{automaticLayout:!0,...i}),G(),b.current?.editor.setTheme(h),E(!0),_.current=!0)},[i,h,G]);u.useEffect(()=>{k&&R.current(L.current,b.current)},[k]),u.useEffect(()=>{!y&&!k&&N()},[y,k,N]);function q(){let S=L.current?.getModel();d||S?.original?.dispose(),p||S?.modified?.dispose(),L.current?.dispose()}return w.createElement(Gn,{width:x,height:f,isEditorReady:k,loading:l,_ref:O,className:g,wrapperProps:m})}var Mi=Ni;u.memo(Mi);function Di(e){let t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}var Pi=Di,Je=new Map;function Oi({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:o,path:s,theme:c="light",line:d,loading:p="Loading...",options:h={},overrideServices:l={},saveViewState:i=!0,keepCurrentModel:f=!1,width:x="100%",height:g="100%",className:m,wrapperProps:j={},beforeMount:v=ze,onMount:k=ze,onChange:E,onValidate:y=ze}){let[C,L]=u.useState(!1),[b,O]=u.useState(!0),R=u.useRef(null),D=u.useRef(null),_=u.useRef(null),G=u.useRef(k),N=u.useRef(v),q=u.useRef(),S=u.useRef(r),M=Pi(s),$=u.useRef(!1),I=u.useRef(!1);Zn(()=>{let z=Kn.init();return z.then(X=>(R.current=X)&&O(!1)).catch(X=>X?.type!=="cancelation"&&console.error("Monaco initialization: error:",X)),()=>D.current?Y():z.cancel()}),ce(()=>{let z=De(R.current,e||r||"",t||o||"",s||n||"");z!==D.current?.getModel()&&(i&&Je.set(M,D.current?.saveViewState()),D.current?.setModel(z),i&&D.current?.restoreViewState(Je.get(s)))},[s],C),ce(()=>{D.current?.updateOptions(h)},[h],C),ce(()=>{!D.current||r===void 0||(D.current.getOption(R.current.editor.EditorOption.readOnly)?D.current.setValue(r):r!==D.current.getValue()&&(I.current=!0,D.current.executeEdits("",[{range:D.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),D.current.pushUndoStop(),I.current=!1))},[r],C),ce(()=>{let z=D.current?.getModel();z&&o&&R.current?.editor.setModelLanguage(z,o)},[o],C),ce(()=>{d!==void 0&&D.current?.revealLine(d)},[d],C),ce(()=>{R.current?.editor.setTheme(c)},[c],C);let F=u.useCallback(()=>{if(!(!_.current||!R.current)&&!$.current){N.current(R.current);let z=s||n,X=De(R.current,r||e||"",t||o||"",z||"");D.current=R.current?.editor.create(_.current,{model:X,automaticLayout:!0,...h},l),i&&D.current.restoreViewState(Je.get(z)),R.current.editor.setTheme(c),d!==void 0&&D.current.revealLine(d),L(!0),$.current=!0}},[e,t,n,r,o,s,h,l,i,c,d]);u.useEffect(()=>{C&&G.current(D.current,R.current)},[C]),u.useEffect(()=>{!b&&!C&&F()},[b,C,F]),S.current=r,u.useEffect(()=>{C&&E&&(q.current?.dispose(),q.current=D.current?.onDidChangeModelContent(z=>{I.current||E(D.current.getValue(),z)}))},[C,E]),u.useEffect(()=>{if(C){let z=R.current.editor.onDidChangeMarkers(X=>{let B=D.current.getModel()?.uri;if(B&&X.find(te=>te.path===B.path)){let te=R.current.editor.getModelMarkers({resource:B});y?.(te)}});return()=>{z?.dispose()}}return()=>{}},[C,y]);function Y(){q.current?.dispose(),f?i&&Je.set(s,D.current.saveViewState()):D.current.getModel()?.dispose(),D.current.dispose()}return w.createElement(Gn,{width:x,height:g,isEditorReady:C,loading:p,_ref:_,className:m,wrapperProps:j})}var Ii=Oi,Ai=u.memo(Ii),$i=Ai;function Li({onClose:e}){const{downlink:t}=gn(),[n,r]=u.useState(""),[o,s]=u.useState(!1),c=u.useRef(null),d=u.useRef(null),p=u.useRef(null),{computedTheme:h}=mn(),l=h.includes("dark")?"vs-dark":"vs",i=u.useCallback(g=>{typeof window>"u"||!window.require||(window.require.config({paths:{"monaco-vim":"https://unpkg.com/monaco-vim/dist/monaco-vim"}}),window.require(["monaco-vim"],function(m){d.current&&(d.current.dispose(),d.current=null),d.current=m.initVimMode(g,p.current)}))},[d,p]);u.useEffect(()=>{if(!o){d.current&&(d.current.dispose(),d.current=null);return}d.current||c.current&&i(c.current)},[o,c,i]);const f=u.useCallback((g,m)=>{c.current=g,o&&i(g)},[o,i]);u.useEffect(()=>{const{ops:g,...m}=_e.getState(),{mapLocalFileToRemote:j}=Te.getState(),v=Mt(m,j),k=Pe.dump(v);r(k),c.current?.setValue(k)},[]);const x=u.useCallback(g=>{try{const{mapLocalFileToRemote:m}=Te.getState(),j=Pe.load(g),v=vn(j,m);t.publish(xn(v)),e?.()}catch(m){console.error("Failed to parse scene yaml:",m)}},[t,e]);return a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs(Ss,{children:[a.jsx(Ts,{children:"Edit Scene"}),a.jsx(ks,{children:"Make changes to your scene here. Click save when you're done."})]}),a.jsx("div",{className:"flex-1 relative",children:a.jsx($i,{theme:l,defaultLanguage:"yaml",defaultValue:n,onChange:r,onMount:f})}),a.jsx("code",{ref:p,className:ot("hidden -mt-7 h-7 text-xs px-0.5 py-2 border-t z-9 bg-bg-primary","[&_input]:border-0 [&_input]:outline-0 [&_input]:select-none")}),a.jsxs("div",{className:"flex items-center justify-end py-2 px-5 h-7 z-10 -mt-7 relative",children:[a.jsx(wn,{id:"Switch",checked:o,onCheckedChange:s}),a.jsx("span",{className:"ml-2 text-xs",children:"Vim Mode"})]}),a.jsxs(js,{className:"flex-row justify-center",children:[a.jsx(me,{variant:"secondary",className:"w-1/4",onClick:e,children:"Close"}),a.jsx(me,{variant:"primary",className:"w-1/4",onClick:()=>x(n),children:"Save"})]})]})}function Fi({children:e}){const[t,n]=u.useState(!1);return a.jsxs(vs,{direction:"right",dismissible:!1,open:t,onOpenChange:n,children:[a.jsx(xs,{asChild:!0,children:e}),a.jsx(bs,{className:"w-1/2! z-[9999]!",children:a.jsx(Li,{onClose:()=>n(!1)})})]})}var lt=(e=>(e[e.SelectObject=Ht.Object]="SelectObject",e[e.SelectGroup=Ht.Group]="SelectGroup",e.Off="Off",e))(lt||{});const zi=({editMode:e,selectEditMode:t})=>{const{switchSelectMode:n,toggleWorldMode:r}=Wt(s=>s.ops),o=Wt(s=>s.useExtrinsic);return a.jsxs(At,{size:"md",className:"z-10",children:[a.jsxs(st,{children:[a.jsxs(Dn,{value:e,onValueChange:s=>{t(s),s!=="Off"&&n(s)},padding:!1,variant:"primary",children:[a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(nt,{icon:!0,value:lt.SelectObject,children:a.jsx(Eo,{})})}),a.jsx(fe,{children:"Select by object"})]}),a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(nt,{value:lt.SelectGroup,icon:!0,children:a.jsx(ko,{})})}),a.jsx(fe,{children:"Select by group"})]}),a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(nt,{value:"Off",icon:!0,children:a.jsx(Pr,{size:16})})}),a.jsx(fe,{children:"off"})]})]}),a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(Po,{variant:"primary",pressed:o,onPressedChange:r,className:"size-8",children:o?a.jsx(Or,{className:"size-4"}):a.jsx(Ir,{className:"size-4"})})}),a.jsx(fe,{children:o?"Switch to local coordinates":"Switch to world coordinates"})]}),a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(Fi,{children:a.jsx(me,{variant:"ghost",icon:!0,size:"md",children:a.jsx(Ar,{})})})}),a.jsx(fe,{children:"Open scene editor"})]})]}),a.jsx(rt,{}),a.jsx(st,{children:a.jsxs(me,{variant:"secondary",size:"md",onClick:()=>vr("Add item clicked"),className:"bg-bg-secondary",children:[a.jsx(_a,{})," Add"]})})]})};function Ui(){const{data:e}=Be(),{signOut:t}=Ra();return e?.user?a.jsxs(Pa,{children:[a.jsx(Oa,{children:a.jsxs(jt,{className:"size-6",children:[e?.user.image&&a.jsx(Yt,{src:e?.user.image}),a.jsx(Tt,{children:e.user.name.charAt(0)})]})}),a.jsxs(Ia,{children:[a.jsxs(Aa,{className:"flex items-center gap-2",children:[a.jsxs(jt,{className:"size-6",children:[e?.user.image&&a.jsx(Yt,{src:e?.user.image}),a.jsx(Tt,{children:e.user.name.charAt(0)})]}),a.jsx("p",{children:e.user.name})]}),a.jsx(qt,{asChild:!0,children:a.jsxs("a",{href:`/profile/${e.user.username}`,children:[a.jsx($r,{})," Profile"]})}),a.jsx($a,{}),a.jsxs(qt,{onClick:t,children:[a.jsx(La,{})," Sign Out"]})]})]}):null}function _i(){const{signIn:e}=bn(),{data:t,isPending:n}=Be();return a.jsx("div",{className:ot("flex flex-row items-center justify-between font-light"),children:n?a.jsx(jt,{className:"size-6",children:a.jsx(Tt,{children:a.jsx(Lr,{className:"animate-spin"})})}):t?.user?a.jsx(Ui,{}):a.jsx(me,{size:"sm",variant:"secondary",className:ot("pointer-events-auto cursor-pointer p-2","hover:mr-1","transition-all duration-200"),onClick:()=>e(),children:"Sign In"})})}const Vi=()=>{const[e,t]=u.useState(!1),{routeParams:n}=Nt(),[r]=to(no,{update(o,{data:s}){const c=o.readFragment({id:`Workspace:${n.id}`,fragmentName:"FWorkspace",fragment:kt});c&&o.writeFragment({id:`Workspace:${n.id}`,fragment:kt,fragmentName:"FWorkspace",data:{...c,coverUrl:s.workspaceCoverUrl.fileUrl}})}});return u.useMemo(()=>[async()=>{t(!0);const o=await new Promise(c=>{document.querySelector("canvas").toBlob(p=>{if(!p)throw new Error("Failed to create Blob from canvas");c(new File([p],"avatar.png",{type:"image/png"}))},"image/png")}),{data:s}=await r({variables:{input:{type:Qa.Png,workspaceId:n.id}}});await fetch(s.workspaceCoverUrl.uploadUrl,{method:"PUT",headers:{"Content-Type":o.type},body:o}),t(!1)},e],[e,n.id,r])};function Bi(){const[e,t]=Vi();return a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(me,{disabled:t,variant:"ghost",icon:!0,onClick:e,children:t?a.jsx(Pt,{}):a.jsx(Fr,{})})}),a.jsx(fe,{children:"Click to generate a cover image."})]})}function Hi(){const[e,t]=u.useState("Untitled"),{routeParams:n}=Nt(),{data:r}=Ka({fragment:kt,fragmentName:"FWorkspace",from:{__typename:"Workspace",id:n.id}}),o=async s=>{s.key==="Enter"&&s.currentTarget.blur()};return r?.name&&e==="Untitled"&&t(r?.name),a.jsx(Ua,{className:"pointer-events-auto w-75",children:a.jsxs("div",{className:"flex items-center justify-between gap-md",children:[a.jsxs("div",{className:"flex flex-1 items-center",children:[a.jsx(zr,{}),a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(Et,{value:e,onChange:s=>t(s.target.value),onKeyDown:o,className:"h-8 min-w-0 flex-1 bg-transparent! px-[2px]!",inputClassName:"font-medium",size:"lg"})}),a.jsx(fe,{children:a.jsx("p",{children:"Click to edit"})})]})]}),a.jsxs("div",{className:"flex flex-shrink-0 flex-row gap-[2px]",children:[a.jsx(Bi,{}),a.jsx(Ur,{children:a.jsx(_r,{})}),a.jsx(_i,{})]})]})})}const Wi=[{value:.125,text:"12.5%"},{value:.25,text:"25%"},{value:.5,text:"50%"},{value:1,text:"1 "},{value:1.5,text:"1.5 "},{value:2,text:"2 "},{value:4,text:"4 "}];function un({rangeValue:e,startValue:t,fps:n,className:r,align:o="left"}){const s=((e-t)/n).toFixed(2);return a.jsx(At,{className:A(r,"p-3","self-center"),children:a.jsx(st,{children:o==="left"?a.jsxs(a.Fragment,{children:[a.jsxs(Le,{className:"font-number-input",children:["[",e,"]"]}),a.jsxs(Le,{className:"pl-md font-number-input",children:[s,"s"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(Le,{className:"pr-md font-number-input",children:[s,"s"]}),a.jsxs(Le,{className:"font-number-input",children:["[",e,"]"]})]})})})}function ve({icon:e,onClick:t,title:n,className:r}){return a.jsx(me,{icon:!0,variant:"ghost",size:"sm",onClick:t,title:n,className:r,children:a.jsx(e,{className:"size-4"})})}function qi({speed:e,onSpeedChange:t}){return a.jsxs(na,{value:String(e),onValueChange:n=>t(Number(n)),children:[a.jsx(ra,{size:"sm",className:"w-18",children:a.jsx(aa,{})}),a.jsx(oa,{position:"item-aligned",children:Wi.map(({text:n,value:r},o)=>a.jsx(sa,{value:String(r),children:n},o))})]})}function Yi({className:e,showTimeline:t,onToggleTimeline:n}){const r=Dt(),o=Vr(),s=Br(),{fps:c=60,speed:d=1,maxlen:p=1e3,recording:h=!1,loop:l=!1,paused:i=!0}=o||{},{start:f=0,rangeStart:x=0,rangeEnd:g=0}=s||{},m=()=>{console.log("Save snapshot clicked")},j=()=>{if(!r?.keyFrames)return;const v=r.keyFrames.toArray(),k=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),E=URL.createObjectURL(k),y=document.createElement("a");y.href=E,y.download="keyframes.json",y.click(),URL.revokeObjectURL(E)};return a.jsxs("div",{className:A(e,"flex flex-row"),children:[a.jsx(un,{rangeValue:x,startValue:f,fps:c,align:"left"}),a.jsx("div",{className:"flex-1"}),a.jsx(At,{children:a.jsx(st,{className:"justify-between",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(qi,{speed:d,onSpeedChange:v=>r?.setSpeed(v)}),a.jsx(rt,{}),a.jsx(Et,{size:"sm",value:c,onChange:v=>r?.setFrameRate(Number(v.target.value)),className:"w-16",children:a.jsx(Xt,{side:"right",children:"FPS"})}),a.jsx(ve,{icon:Hr,onClick:m,title:"Save snapshot"}),a.jsx(rt,{}),a.jsx(ve,{icon:Wr,onClick:r?.reset,title:"Start [Shift + Left arrow]"}),a.jsx(ve,{icon:qr,onClick:r?.seekPrevious,title:"Previous frame [Left arrow]"}),a.jsx(ve,{icon:i?Yr:Xr,onClick:r?.togglePlayback,title:i?"Play [Space]":"Pause [Space]"}),a.jsx(ve,{icon:Qr,onClick:r?.seekNext,title:"Next frame [Right arrow]"}),a.jsx(ve,{icon:Kr,onClick:r?.seekEnd,title:"End [Shift + Right arrow]"}),a.jsx(ve,{icon:Gr,onClick:r?.toggleLoop,title:l?"Disable looping [L]":"Enable looping [L]",className:l?"bg-primary/20":""}),a.jsx(rt,{}),a.jsxs(Zr,{orientation:"label-left",className:"max-w-25",children:[a.jsx(Le,{htmlFor:"sim-toggle ml-1",children:"mujoco"}),a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(wn,{id:"sim-toggle",className:"mx-1"})}),a.jsx(fe,{className:"p-0",children:"Toggle Simulation"})]})]}),a.jsx(Et,{size:"sm",type:"number",side:"right",value:p,onChange:v=>r?.setMaxlen(Number(v.target.value)),className:"w-25",children:a.jsx(Xt,{children:"Maxlen"})}),a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(me,{icon:!0,variant:"ghost",size:"sm",onClick:()=>r?.toggleRecording(),children:a.jsx(Jr,{className:"size-4",fill:h?"red":"transparent",color:"red"})})}),a.jsx(fe,{className:"p-0",children:h?"Stop Recording":"Record Events"})]}),a.jsx(ve,{icon:ea,onClick:()=>r?.clear(),title:"Clear the key frames buffer"}),a.jsx(ve,{icon:ta,onClick:j,title:"Save playback data"}),a.jsx(me,{icon:!0,variant:"ghost",size:"sm",className:`transition-transform duration-200 ${t?"-rotate-90":""}`,onClick:n,title:t?"Hide Timeline":"Show Timeline",children:a.jsx(hn,{})})]})})}),a.jsx("div",{className:"flex-1"}),a.jsx(un,{rangeValue:g,startValue:f,fps:c,align:"right"})]})}function Xi(e){if(!e||!e.keyFrames)return[];const t=e.keyFrames.toArray();if(t.length===0)return[];const n=t[0];return t.map((r,o)=>({id:`frame-${o}`,parentId:null,label:`Frame ${o} - ${r.etype}`,etype:"step",time:(r-n)/1e3,color:"blue",isCollapsible:!1}))}function Qi({className:e,isVisible:t=!0}){const n=Dt(),r=u.useMemo(()=>Xi(n),[n]),o=s=>a.jsx(Fa,{className:"size-4"});return a.jsx("div",{className:ot(e,"transition-all","duration-300","ease-in-out","overflow-hidden",t?"max-h-50":"max-h-0",t?"opacity-100":"opacity-0"),children:a.jsx(To,{logData:r,getIcon:o,panelWidth:300,className:"h-50"})})}const Ki=e=>(t,n,r)=>(r.setState=(o,s,...c)=>{const d=typeof o=="function"?ia(o):o;return t(d,s,...c)},e(r.setState,n,r)),er=Ki;var bt,dn;function Gi(){if(dn)return bt;dn=1;function e(l){return l===void 0}function t(l){return l===null}function n(l){return typeof l=="boolean"}function r(l){return l===Object(l)}function o(l){return Array.isArray(l)}function s(l){return l instanceof Date}function c(l,i){return i?r(l)&&!e(l.uri):r(l)&&typeof l.size=="number"&&typeof l.type=="string"&&typeof l.slice=="function"}function d(l,i){return c(l,i)&&typeof l.name=="string"&&(r(l.lastModifiedDate)||typeof l.lastModified=="number")}function p(l){return e(l)?!1:l}function h(l,i,f,x){i=i||{},f=f||new FormData,i.indices=p(i.indices),i.nullsAsUndefineds=p(i.nullsAsUndefineds),i.booleansAsIntegers=p(i.booleansAsIntegers),i.allowEmptyArrays=p(i.allowEmptyArrays),i.noAttributesWithArrayNotation=p(i.noAttributesWithArrayNotation),i.noFilesWithArrayNotation=p(i.noFilesWithArrayNotation),i.dotsForObjectNotation=p(i.dotsForObjectNotation);const g=typeof f.getParts=="function";return e(l)||(t(l)?i.nullsAsUndefineds||f.append(x,""):n(l)?i.booleansAsIntegers?f.append(x,l?1:0):f.append(x,l):o(l)?l.length?l.forEach((m,j)=>{let v=x+"["+(i.indices?j:"")+"]";(i.noAttributesWithArrayNotation||i.noFilesWithArrayNotation&&d(m,g))&&(v=x),h(m,i,f,v)}):i.allowEmptyArrays&&f.append(i.noAttributesWithArrayNotation?x:x+"[]",""):s(l)?f.append(x,l.toISOString()):r(l)&&!c(l,g)?Object.keys(l).forEach(m=>{const j=l[m];if(o(j))for(;m.length>2&&m.lastIndexOf("[]")===m.length-2;)m=m.substring(0,m.length-2);const v=x?i.dotsForObjectNotation?x+"."+m:x+"["+m+"]":m;h(j,i,f,v)}):f.append(x,l)),f}return bt={serialize:h},bt}var Zi=Gi();const tr=void 0;async function Ji(e){return Wn(`${tr}/workspace/${e}/zip`)}async function el(e){const t=e[0]?.workspaceId;if(!t)throw new Error("No workspaceId in actions");const n=Zi.serialize({actions:e});return Wn(`${tr}/workspace/${t}/sync`,{method:"POST",body:n})}const at=yn()(er((e,t)=>({syncActionsQueue:[],processing:!1,errorHandler:void 0,ops:{enqueueAction:n=>{e(r=>{r.syncActionsQueue.push(n)}),t().ops.processSyncQueue()},processSyncQueue:async()=>{if(!t().processing){for(e({processing:!0});t().syncActionsQueue.length>0;){const n=t().syncActionsQueue[0];try{const r=await tl(n);if(r.ok)e(o=>{o.syncActionsQueue.shift()});else{console.error("Sync action failed:",r.status,r.statusText),t().errorHandler&&t().errorHandler(new Error(r.statusText||r.status?.toString()||"Sync action failed"),n);break}}catch(r){t().errorHandler&&t().errorHandler(r,n);break}}e({processing:!1})}},setErrorHandler:n=>e({errorHandler:n})}})));async function tl(e){return console.log("start handled action:",e),el([e])}const Ce=yn()(er((e,t)=>({enableSync:!1,taskQueue:[],processing:!1,ops:{setSyncEnable:()=>{e(n=>{n.enableSync=!0})},enqueueTask:n=>{t().enableSync&&(e(r=>{r.taskQueue.push(n)}),t().ops.processTaskQueue())},processTaskQueue:async()=>{if(!t().processing){for(e({processing:!0});t().taskQueue.length>0;){const n=t().taskQueue[0];try{await nl(n),e(r=>{r.taskQueue.shift()})}catch(r){console.error("Error processing task:",r);break}}e({processing:!1})}},fileInsert:({workspaceId:n,filePath:r,blobOrBlobUrl:o})=>{t().ops.enqueueTask(async()=>{const s=o instanceof Blob?o:await dt(o);return{workspaceId:n,actionType:"FILE_INSERT",data:{filePath:r,blob:s}}})},fileUpdate:({workspaceId:n,filePath:r,blobOrBlobUrl:o})=>{t().ops.enqueueTask(async()=>{const s=o instanceof Blob?o:await dt(o);return{workspaceId:n,actionType:"FILE_UPDATE",data:{filePath:r,blob:s}}})},fileUpsert:({workspaceId:n,filePath:r,blobOrBlobUrl:o})=>{t().ops.enqueueTask(async()=>{const s=o instanceof Blob?o:await dt(o);return{workspaceId:n,actionType:"FILE_UPSERT",data:{filePath:r,blob:s}}})},fileDelete:({workspaceId:n,filePath:r})=>{t().ops.enqueueTask(async()=>({workspaceId:n,actionType:"FILE_DELETE",data:{filePath:r}}))},workspaceRename:({workspaceId:n,newWorkSpaceName:r})=>{t().ops.enqueueTask(async()=>({workspaceId:n,actionType:"WORKSPACE_RENAME",data:{newWorkSpaceName:r}}))}}})));async function nl(e){const t=await e();at.getState().ops.enqueueAction(t)}function rl(){u.useEffect(()=>{const e=_e.subscribe(la(t=>{const n="scene.vuer",{ops:r,...o}=t,{mapLocalFileToRemote:s}=Te.getState(),c=Mt(o,s),d=Pe.dump(c);Ce.getState().ops.fileUpsert({workspaceId:Te.getState().workspaceId,filePath:n,blobOrBlobUrl:new Blob([d],{type:"text/yaml"})})},{waitFor:200,maxWait:5e3}));return()=>e()},[])}function al(){const e=Te(t=>t.ops);u.useEffect(()=>(e.setSyncHooks({insertFile:({workspaceId:t,filePath:n,blobOrBlobUrl:r})=>{Ce.getState().ops.fileInsert({workspaceId:t,filePath:n,blobOrBlobUrl:r})},updateFile:({workspaceId:t,filePath:n,blobOrBlobUrl:r})=>{Ce.getState().ops.fileUpdate({workspaceId:t,filePath:n,blobOrBlobUrl:r})},deleteFile:({workspaceId:t,filePath:n})=>{Ce.getState().ops.fileDelete({workspaceId:t,filePath:n})}}),()=>e.setSyncHooks({insertFile:void 0,updateFile:void 0,deleteFile:void 0})),[e])}function ol(){rl(),al()}const sl=Pe.load(`children:
  - tag: Group
    key: group1
    children:
      - tag: Box
        key: box-1.1
        position: [0, 0, 0]
        args: [0.2, 0.2, 0.2]
      - tag: Cone
        key: cone-1.2
        position: [0.3, 0, 0]
        args: [0.1, 0.2, 16, 1, false, 0, 6.28]
      - tag: Cylinder
        key: cylinder-1.3
        position: [-0.3, 0, 0]
        args: [0.1, 0.1, 0.2, 32, 1, true, 0, 6.28]
  - tag: Group
    key: group2
    children:
      - tag: Box
        key: box-2.1
        position: [0, 0.3, 0]
        args: [0.2, 0.2, 0.2]
      - tag: Box
        key: box-2.2
        position: [0.3, 0.3, 0]
        args: [0.2, 0.2, 0.2]
  - tag: Box
    key: box-3
    position: [0, 0.6, 0]
    args: [0.2, 0.2, 0.2]
  - tag: ContribLoader
    key: contrib-loader-mujoco
    library: "@vuer-ai/mujoco-ts"
    version: "0.0.75"
    main: dist/index.umd.js
    dependencies:
      - VUER
      - LEVA
      - FIBER
bgChildren:
  - tag: Grid
    key: grid
  - tag: HemisphereLightStage
    key: light-stage
  - tag: Gamepad
    key: gamepad-0
    index: 0
  - tag: Hands
    key: hands
    fps: 30
    stream: true
  - tag: MotionControllers
    key: motion-controllers
    fps: 30
    stream: true
  - tag: WebXRMesh
    key: webxr-mesh
    opacity: 0.15
    # autoUpdate: true  #  WEBXR_MESH_UPDATE
  - tag: OrbitControls
    key: orb-control
    makeDefault: true
  - tag: PerspectiveCamera
    key: perspective-camera
    makeDefault: true
    position: [ 0, 2, 2 ]
`);function fn({open:e,onOpenChange:t}){const{data:n,isPending:r}=Be(),{signIn:o}=bn(),s=Ce(d=>d.ops),c=u.useCallback(async()=>{n||await o(),s.setSyncEnable();const d=Te.getState().workspaceId,p=Te.getState().mapLocalFileToRemote;for(const[g,m]of Object.entries(p))s.fileInsert({workspaceId:d,filePath:g,blobOrBlobUrl:m});const{ops:h,...l}=_e.getState(),i=Mt(l,p),f=Pe.dump(i);s.fileInsert({workspaceId:d,filePath:"scene.vuer",blobOrBlobUrl:new Blob([f],{type:"text/yaml"})}),ro(`/workspace/${d}`,{overwriteLastHistoryEntry:!0}).then(()=>console.log("Navigated to workspace ...")),t(!1)},[o,s,n,t]);return a.jsx(Oo,{open:e,onOpenChange:t,children:a.jsxs(zo,{children:[a.jsxs(Uo,{children:[a.jsx(_o,{className:"text-left",children:"Switch to Online Mode"}),a.jsx("div",{className:"px-4 pb-8 text-uk-md leading-uk-md text-text-primary",children:n?a.jsxs("span",{children:["You are currently in local mode. To switch to online mode, please sign in. Your data will then be synced to the cloud for safe backup.",a.jsx("br",{}),"Do you want to sign in and switch now?"]}):a.jsxs("span",{children:["You are currently in local mode. If you switch to online mode, your data will be synced to the cloud to keep it safe and accessible across devices.",a.jsx("br",{}),"Do you want to switch now?"]})})]}),a.jsxs(Vo,{children:[a.jsx(Ao,{asChild:!0,children:a.jsx(me,{variant:"secondary",onClick:()=>t(!1),children:"Cancel"})}),a.jsx(me,{className:"ml-2",onClick:c,children:"Switch to Online Mode"})]})]})})}function il({existingScene:e}){const{isPending:t}=Be(),[n,r]=u.useState(!1),o=Ce(p=>p.enableSync),s=at(p=>p.processing),c=at(p=>p.syncActionsQueue.length),d=at(p=>p.ops.processSyncQueue);if(t)return null;if(e&&!o)return a.jsxs("div",{className:"ml-2",children:[a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(gt,{className:"text-xs",children:"Readonly"})}),a.jsxs(fe,{children:["Readonly Mode  This scene is shared from another user. ",a.jsx("br",{})]})]}),a.jsx(fn,{open:n,onOpenChange:r})]});if(!o)return a.jsxs("div",{className:"ml-2",children:[a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsx(gt,{className:"cursor-pointer text-xs",onClick:()=>r(!0),children:"Local"})}),a.jsx(fe,{children:"Local Mode  Your work is saved on this device. Click to sync online."})]}),a.jsx(fn,{open:n,onOpenChange:r})]});if(o){if(s)return a.jsxs("div",{className:"ml-2",children:[a.jsx(Pt,{size:"14"})," "]});if(c>0)return a.jsx("div",{className:"ml-2",children:a.jsxs(ue,{children:[a.jsx(de,{asChild:!0,children:a.jsxs(gt,{className:"cursor-pointer text-xs",variant:"warning",onClick:d,children:["Sync Error (",c,")"]})}),a.jsxs(fe,{children:[c," actions failed to sync. ",a.jsx("br",{}),"Click to retry."]})]})})}return null}function ll({className:e,isReady:t,existingScene:n}){return a.jsx("div",{className:A(e),children:t?a.jsx(il,{existingScene:n}):a.jsx(Pt,{className:"ml-2"})})}const ae=[];for(let e=0;e<256;++e)ae.push((e+256).toString(16).slice(1));function cl(e,t=0){return(ae[e[t+0]]+ae[e[t+1]]+ae[e[t+2]]+ae[e[t+3]]+"-"+ae[e[t+4]]+ae[e[t+5]]+"-"+ae[e[t+6]]+ae[e[t+7]]+"-"+ae[e[t+8]]+ae[e[t+9]]+"-"+ae[e[t+10]]+ae[e[t+11]]+ae[e[t+12]]+ae[e[t+13]]+ae[e[t+14]]+ae[e[t+15]]).toLowerCase()}let St;const ul=new Uint8Array(16);function dl(){if(!St){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");St=crypto.getRandomValues.bind(crypto)}return St(ul)}const fl=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),pn={randomUUID:fl};function pl(e,t,n){e=e||{};const r=e.random??e.rng?.()??dl();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,cl(r)}function ml(e,t,n){return pn.randomUUID&&!e?pn.randomUUID():pl(e)}const hl=()=>{const[e,t]=u.useState(!1),[n,r]=u.useState(!0),[o,s]=u.useState(!1),[c]=Ms(Ja),{routeParams:d}=Nt(),{data:p,isPending:h}=Be(),{set:l}=_e(g=>g.ops),i=Te(g=>g.ops),f=Ce(g=>g.ops.setSyncEnable),x=u.useEffectEvent(async g=>{if(console.log("load workspace handle..."),console.log("routeParams.id",d.id),d.id!=="new"){console.log("start query workspace metadata...");const m=async function(j){try{const v=await Ji(j);if(v.status===401||v.status===403)return t(!0),r(!1),null;if(v.status===404||!v.ok)return r(!1),null;const k=await v.arrayBuffer();return ca(k)}catch(v){return console.error("Failed to fetch workspace zip",v),r(!1),null}};try{const{data:j}=await c({variables:{workspaceId:d.id}}),v=Ga(Za,j.workspace);console.log("metadata",v),i.setWorkspaceId(d.id);const k=await m(d.id);if(k){const{sceneYaml:E,assetsInZip:y}=k;if(i.addFileByMapping(y,!0),E){const C=Pe.load(E),L=vn(C,y);l(xn(L)),s(!0)}}v.userId===g&&f()}catch(j){console.error("Failed to fetch metadata",j)}}else i.setWorkspaceId(ml());r(!1)});return u.useEffect(()=>{console.log("================ start ================"),console.log("loading workspace state useEffect",{isUserPending:h}),!h&&x(p?.user.id).then(()=>console.log("Loaded workspace"))},[h,p?.user.id]),u.useMemo(()=>({isLoading:n,noAccess:e,isReady:!n&&!e,existingScene:o}),[n,e,o])};typeof window<"u"&&(window.React=w,window.ReactDOM=wr,window.VUER=ja,window.THREE=Va,window.JSX=yr,window.FIBER=Ba,window.XR=Ha,window.Drei=Wa,window.LEVA=Ta,window.ZUSTAND=ka);function gl({editMode:e=!1,isUIVisible:t,setIsUIVisible:n}){const r=Dt(),{downlink:o}=gn(),[s,c]=w.useState(null);u.useEffect(()=>{if(!r)return;const i=[o.subscribe("SET",r.addKeyFrame),o.subscribe("ADD",r.addKeyFrame),o.subscribe("UPDATE",r.addKeyFrame),o.subscribe("UPSERT",r.addKeyFrame),o.subscribe("REMOVE",r.addKeyFrame)];return()=>{i.forEach(f=>f())}},[r,o]);const d=u.useMemo(()=>r?.store?new wa(o,r?.store):o,[o,r?.store]),p=w.useCallback(i=>{i.preventDefault(),c({x:i.clientX,y:i.clientY})},[]),h=w.useCallback(()=>{c(null)},[]),l=w.useCallback(()=>{n(!t)},[t,n]);return a.jsxs(a.Fragment,{children:[a.jsx(ya,{stream:d,prompt:"scene files supported: *.urdf *.pcd *.ply *.splat",style:{display:"flex",flexDirection:"row"},innerStyle:{display:"flex",flexDirection:"row"},children:a.jsx(ba,{stream:d,editMode:e,onCanvasContextMenu:p})}),s&&a.jsx(Sa,{x:s.x,y:s.y,onClose:h,onToggleUI:l})]})}function vl(){const{set:e}=_e(i=>i.ops);u.useLayoutEffect(()=>{e({etype:"SET",ts:Date.now(),data:{tag:"Scene",...sl}})},[e]),ol();const{isReady:t,existingScene:n}=hl(),[r,o]=w.useState(lt.SelectObject),[s,c]=w.useState(!1),[d,p]=w.useState(!0);u.useEffect(()=>{const i=f=>{(f.ctrlKey||f.metaKey)&&f.key==="\\"&&(f.preventDefault(),p(x=>!x))};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[]);const l=mn(i=>i.isLiquid)?ma:ha;return a.jsx(fa,{children:a.jsx(pa,{children:a.jsx(l,{hideUI:!d,top:a.jsx(zi,{editMode:r,selectEditMode:o}),left:a.jsxs("div",{className:"flex h-full flex-col gap-2",children:[a.jsx(Hi,{}),a.jsx(va,{syncStatusComponent:a.jsx(ll,{isReady:t,existingScene:n})}),a.jsx(xa,{className:"overflow-y-auto"})]}),right:a.jsx("div",{className:"flex max-h-full flex-col gap-2",children:a.jsx(ga,{})}),bottom:a.jsx("div",{className:A("flex w-full flex-col items-center",s&&"gap-2"),children:a.jsxs("div",{className:"flex w-full flex-col justify-between overflow-x-auto",children:[a.jsx(Yi,{className:s&&"mb-2",showTimeline:s,onToggleTimeline:()=>c(!s)}),a.jsx(Qi,{className:"w-full",isVisible:s})]})}),children:a.jsx(gl,{editMode:!!r,isUIVisible:d,setIsUIVisible:p})})})})}function xl(){return a.jsxs(a.Fragment,{children:[a.jsx(xr,{children:a.jsx("title",{children:"Vuer Editor"})}),a.jsx("main",{className:A("flex h-screen w-screen items-center justify-center overflow-hidden"),children:a.jsx(Rn,{children:a.jsx(ua,{children:a.jsx(da,{children:a.jsx(vl,{})})})})})]})}const wl=Object.freeze(Object.defineProperty({__proto__:null,default:xl},Symbol.toStringTag,{value:"Module"})),Wl={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:kr}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Tr}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:jr}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/workspace/@id/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:wl}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/pages/+Layout.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:Sr}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"Vuer UIKit | FortyFive Labs"}},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:br}}};export{Wl as configValuesSerialized};
