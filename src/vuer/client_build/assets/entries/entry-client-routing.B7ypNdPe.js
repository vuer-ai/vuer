import{c,o as u,s as f,r as s,d,e as g,g as m,h as p,j as S,m as k,k as y,l as P,n as h,b as N}from"../chunks/chunk-D9z31qZm.js";import{b as w,c as C}from"../chunks/chunk-liTnN7pR.js";import"../chunks/chunk-BXl3LOEh.js";function H(){window.addEventListener("popstate",L)}async function L(){c("onPopState()");const{isHistoryStateEnhanced:t,previous:i,current:n}=u();if(t)await v(i,n);else return}async function v(t,i){const n=i.state.scrollPosition||void 0;if(r(i.url)===r(t.url)&&i.url!==t.url){f(n);return}const o=i.state.triggeredBy==="user"||t.state.triggeredBy==="user",l=!i.state.timestamp||!t.state.timestamp?null:i.state.timestamp<t.state.timestamp;await s({scrollTarget:n,isBackwardNavigation:l,doNotRenderIfSamePage:o})}function r(t){return t.split("#")[0]}function B(){document.addEventListener("click",T)}async function T(t){if(!A(t))return;const i=R(t.target);if(!i)return;const n=i.getAttribute("href");if(n===null)return;if(n.includes("#")&&d(n)){t.preventDefault(),g(n.split("#")[1]);return}if(m(i))return;t.preventDefault();let e;{const a=i.getAttribute("keep-scroll-position");a!==null&&(e={preserveScroll:a!=="false"})}await s({scrollTarget:e,urlOriginal:n,isBackwardNavigation:!1})}function A(t){return t.button===0&&!t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey}function R(t){for(;t.tagName!=="A";){const{parentNode:i}=t;if(!i)return null;t=i}return t}async function b(){I();const t=E();B(),p(),await t}async function E(){w(h()===0),await s({scrollTarget:{preserveScroll:!0},isBackwardNavigation:null,isClientSideNavigation:!1})}function I(){S(),k(),y(),P(),H()}N();C();b();
