import{v as h,r as u}from"./chunk-Bxh3mmdk.js";import{u as g}from"./chunk-BrI55jUa.js";import{t as f,b as m}from"./chunk-DK86WuFI.js";var p=e=>{const{authMode:t}=e;return t==="redirect"?R(e):U(e)},R=e=>{const{callbackURL:t,baseURL:n}=e;window.location.href=`${n}/authorize?callbackURL=${encodeURIComponent(t)}`},U=async e=>{const{callbackURL:t,baseURL:n}=e,o=500,s=600,i=(window.screen.width-o)/2,r=(window.screen.height-s)/2,l=window.open(`${n}/authorize?origin=${encodeURIComponent(window.location.origin)}`,"vuer-auth-center",`width=${o},height=${s},top=${r},left=${i}`);return new Promise(w=>{const d=a=>{if([n].includes(a.origin)&&(a.data.type==="READY"&&l?.postMessage({type:"REQUEST_TOKEN"},n),a.data.type==="AUTH_TOKEN")){const c=a.data.token;c&&(localStorage.setItem(h,c),window.removeEventListener("message",d),w(c),t&&(window.location.href=t))}};window.addEventListener("message",d)})},$=()=>{const{refetch:e,baseURL:t}=g(),[n,o]=u.useState(!1),s=u.useCallback(async i=>{try{o(!0),await p({...i,baseURL:t});const r=await e();return o(!1),r}catch(r){return console.error(r),null}},[t,e]);return u.useMemo(()=>({isPending:n,signIn:s}),[n,s])};function k(...e){return f(m(e))}export{k as c,$ as u};
