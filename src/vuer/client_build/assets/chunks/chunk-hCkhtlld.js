import{_ as f,S as H,e as P,f as C,g as T,h as Z,r as h,k as o,l as G,m as I,n as L,N as z,j as a}from"./chunk-Bxh3mmdk.js";import{j as B,k as M,l as Q,n as q,u as V,w as U}from"./chunk-CdabVADL.js";import{a as _,b as R}from"./chunk-BY7XLEYA.js";var J=(function(r){f(t,r);function t(e,n){return r.call(this)||this}return t.prototype.schedule=function(e,n){return this},t})(H),j={setInterval:function(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return setInterval.apply(void 0,P([r,t],C(e)))},clearInterval:function(r){return clearInterval(r)},delegate:void 0},Y=(function(r){f(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(e,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=e;var s=this.id,c=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(c,s,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(c,this.id,n),this},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),j.setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&j.clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var i=!1,s;try{this.work(e)}catch(c){i=!0,s=c||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},t.prototype.unsubscribe=function(){if(!this.closed){var e=this,n=e.id,i=e.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,T(s,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},t})(J),X=1,v,p={};function w(r){return r in p?(delete p[r],!0):!1}var F={setImmediate:function(r){var t=X++;return p[t]=!0,v||(v=Promise.resolve()),v.then(function(){return w(t)&&r()}),t},clearImmediate:function(r){w(r)}},$=F.setImmediate,K=F.clearImmediate,A={setImmediate:function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return $.apply(void 0,P([],C(r)))},clearImmediate:function(r){return K(r)},delegate:void 0},O=(function(r){f(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=A.setImmediate(e.flush.bind(e,void 0))))},t.prototype.recycleAsyncId=function(e,n,i){var s;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,i);var c=e.actions;n!=null&&((s=c[c.length-1])===null||s===void 0?void 0:s.id)!==n&&(A.clearImmediate(n),e._scheduled===n&&(e._scheduled=void 0))},t})(Y),S=(function(){function r(t,e){e===void 0&&(e=r.now),this.schedulerActionCtor=t,this.now=e}return r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},r.now=Z.now,r})(),ee=(function(r){f(t,r);function t(e,n){n===void 0&&(n=S.now);var i=r.call(this,e,n)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(e){var n=this.actions;if(this._active){n.push(e);return}var i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}},t})(S),te=(function(r){f(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i=this.actions,s;e=e||i.shift();do if(s=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,s){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw s}},t})(ee),re=new te(O);const ie=Symbol.for("apollo.skipToken"),d=Symbol();function W(r,...[t]){"use no memo";return B("useQuery",ne,M(typeof t=="object"?t.client:void 0))(r,t)}function ne(r,t={}){const e=M(typeof t=="object"?t.client:void 0),{ssr:n}=typeof t=="object"?t:{},i=se(r,t,e.defaultOptions.watchQuery);function s(x){const u=e.watchQuery(i);return{client:e,query:r,observable:u,resultData:{current:u.getCurrentResult(),previousData:x?.resultData.current.data,variables:u.variables}}}let[c,D]=h.useState(s);(e!==c.client||r!==c.query)&&D(c=s(c));const{observable:l,resultData:m}=c;ae(i,l),le(m,l,i);const y=ce(l,m,n),g=h.useMemo(()=>({refetch:l.refetch.bind(l),fetchMore:l.fetchMore.bind(l),updateQuery:l.updateQuery.bind(l),startPolling:l.startPolling.bind(l),stopPolling:l.stopPolling.bind(l),subscribeToMore:l.subscribeToMore.bind(l)}),[l]),b=m.previousData;return h.useMemo(()=>{const{partial:x,...u}=y;return{...u,client:e,observable:l,variables:l.variables,previousData:b,...g}},[y,e,l,b,g])}const E=Symbol();function se(r,t,e){return Q(()=>{if(t===ie){const i=I(e,{query:r,fetchPolicy:"standby"});return i[E]=!0,i}const n=I(e,{...t,query:r});return t.skip&&(n.initialFetchPolicy=t.initialFetchPolicy||t.fetchPolicy,n.fetchPolicy="standby"),n},[r,t,e])}function ae(r,t){"use no memo";r.fetchPolicy||(r.fetchPolicy=t.options.initialFetchPolicy)}function ce(r,t,e){"use no memo";return q(h.useCallback(n=>{const i=r.pipe(G(re)).subscribe(s=>{const c=t.current;o(c,s)&&o(t.variables,r.variables)||(t.variables=r.variables,c.data&&!o(c.data,s.data)&&(t.previousData=c.data),t.current=s,n())});return()=>{setTimeout(()=>i.unsubscribe())}},[r,t]),()=>t.current,()=>e===!1?W.ssrDisabledResult:t.current)}function le(r,t,e){"use no memo";if(t[d]&&!o(t[d],e)){t[d][E]&&!e.initialFetchPolicy&&(e.initialFetchPolicy=e.fetchPolicy),oe(t[d],e)?t.reobserve(e):t.applyOptions(e);const n=t.getCurrentResult();o(n.data,r.current.data)||(r.previousData=r.current.data||r.previousData),r.current=n,r.variables=t.variables}t[d]=e}function oe(r,t){return r.query!==t.query||!o(r.variables,t.variables)||r.fetchPolicy!==t.fetchPolicy&&(t.fetchPolicy==="standby"||r.fetchPolicy==="standby")}W.ssrDisabledResult=L({loading:!0,data:void 0,dataState:"empty",error:void 0,networkStatus:z.loading,partial:!0});function ue(){return a.jsxs(_,{className:"p-0 w-full transition-all duration-200 border border-transparent",style:{height:"240px",maxWidth:"520px"},children:[a.jsx("div",{className:"relative w-full h-43 overflow-hidden rounded-uk-md bg-gradient-to-br from-gray-100 to-gray-200 animate-pulse"}),a.jsxs(R,{className:"p-lg flex flex-col gap-md",children:[a.jsxs("div",{className:"flex flex-row justify-between",children:[a.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse flex-1 mr-4"}),a.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded animate-pulse"})]}),a.jsxs("div",{className:"flex flex-row justify-between",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-20"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"})]})]})]})}const N="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMyMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMTgwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNDQuNSA5MC41SDE3NS41VjEyMS41SDE0NC41VjkwLjVaIiBmaWxsPSIjOUNBM0FGIi8+Cjwvc3ZnPgo=";function de({sceneId:r,Content:t,index:e}){const{data:n}=V({fragment:U,fragmentName:"FWorkspace",from:{__typename:"Workspace",id:r}});return a.jsx("a",{href:`/workspace/${n.id}`,target:"_blank",children:a.jsxs(_,{className:"cursor-pointer border-none p-0 transition-all duration-200 hover:-translate-y-0.5 hover:transform hover:shadow-lg",children:[a.jsx("div",{className:"relative h-43 w-full overflow-hidden rounded-uk-md",children:a.jsx("img",{alt:n.name,className:"h-full w-full object-cover",src:n.coverUrl??N,onError:i=>{i.currentTarget.src=N}})}),a.jsx(R,{className:"flex flex-col gap-md p-lg",children:a.jsx(t,{id:r})})]})})}function ve(r){const{loading:t,data:e,error:n,Content:i}=r;return a.jsx(a.Fragment,{children:t?a.jsx(k,{children:Array.from({length:8}).map((s,c)=>a.jsx(ue,{},c))}):e.length>0?a.jsx(k,{children:e.map((s,c)=>a.jsx(de,{sceneId:s,Content:i,index:c},s))}):n?a.jsx("div",{className:"flex items-center justify-center py-8",children:"Something went wrong, please try again."}):a.jsx("div",{className:"flex items-center justify-center py-8",children:"No data."})})}const k=({children:r})=>a.jsx("div",{className:"grid w-full grid-cols-[repeat(auto-fill,minmax(240px,1fr))] gap-4",children:r});export{ve as W,W as u};
