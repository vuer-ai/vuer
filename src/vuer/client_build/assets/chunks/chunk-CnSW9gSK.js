import{j as e,r as m,t as d}from"./chunk-Bxh3mmdk.js";import{u as l,w as p,i as f,g as x,h}from"./chunk-CdabVADL.js";import{u as w,w as g}from"./chunk-S1zsQQps.js";import{D as k,a as v,b as j,c as u}from"./chunk-CvLG4DX1.js";import{B as D}from"./chunk-DK86WuFI.js";import{E as M,T as F,S as W}from"./chunk-DwlDFfQQ.js";import{u as y}from"./chunk-BrI55jUa.js";import{u as S}from"./chunk-hCkhtlld.js";function U(r){const s=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),t=new Date().getTime(),a=(r-t)/1e3,n=Math.abs(a),i=[{max:60,value:1,name:"second"},{max:3600,value:60,name:"minute"},{max:86400,value:3600,name:"hour"},{max:2592e3,value:86400,name:"day"},{max:31536e3,value:2592e3,name:"month"},{max:1/0,value:31536e3,name:"year"}];for(const o of i)if(n<o.max){const c=Math.round(a/o.value);return s.format(c,o.name)}}function Q({id:r}){const{data:s}=l({fragment:p,fragmentName:"FWorkspace",from:{__typename:"Workspace",id:r}}),[t]=w(g);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex w-full items-center gap-md",children:[e.jsx("p",{className:"flex-1 overflow-hidden text-uk-md/uk-md font-medium overflow-ellipsis whitespace-nowrap",children:s.name}),e.jsxs(k,{children:[e.jsx(v,{asChild:!0,children:e.jsx(D,{icon:!0,variant:"ghost",children:e.jsx(M,{})})}),e.jsxs(j,{onClick:a=>a.stopPropagation(),children:[e.jsxs(u,{children:[e.jsx(F,{})," Delete"]}),e.jsxs(u,{onSelect:()=>t({variables:{input:{isShared:!s.isShared,workspaceId:r}}}),children:[e.jsx(W,{})," ",s.isShared?"Unshare":"Share"]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden text-uk-sm/uk-sm overflow-ellipsis whitespace-nowrap text-text-secondary",children:["Edited: ",U(new Date(s.updatedAt).getTime())]})]})}const R=()=>{const{data:r}=y(),{data:s,loading:t,error:a}=S(f,{variables:{username:r?.user.username},skip:!r?.user.username}),n=m.useMemo(()=>s?.userWorkspaces.map(i=>x(h,i).id)||[],[s?.userWorkspaces]);return m.useEffect(()=>{a&&d.error(a.message)},[a]),m.useMemo(()=>({ids:n,loading:t,error:a}),[a,n,t])};export{Q as W,R as u};
