{"version":3,"file":"pages_index.Po_QkRBu.js","sources":["../../../../pages/index/+Page.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Helmet } from '@vuer-ai/react-helmet-async';\n// import { ClickAwayListener, useSnackbar } from '@mui/base';\n// import {\n//   InfoSnackbar,\n//   Snackbars,\n//   SuccessSnackbar,\n//   WarningSnackbar,\n// } from './_components/snackbars';\nimport style from './index.module.scss';\nimport {\n  AppProvider, ContribLoader,\n  Grid,\n  Hands,\n  HemisphereLightStage, MotionControllers,\n  VuerRoot,\n  WebSocketProvider,\n} from '@vuer-ai/vuer';\nimport ReactDOM from 'react-dom';\nimport * as THREE from 'three';\nimport * as JSX from 'react/jsx-runtime';\nimport * as FIBER from '@react-three/fiber';\nimport * as VUER from '@vuer-ai/vuer';\nimport * as Drei from '@react-three/drei';\nimport * as XR from '@react-three/xr';\nimport * as LEVA from 'leva';\nimport * as ZUSTAND from 'zustand';\n\n// import { HandActuator } from '@vuer-ai/mujoco-ts';\n// console.log(HandActuator);\n\ndeclare global {\n  interface Window {\n    React: typeof React;\n    ReactDOM: typeof ReactDOM;\n    VUER: typeof VUER;\n    THREE: typeof THREE;\n    JSX: typeof JSX;\n    FIBER: typeof FIBER;\n    XR: typeof XR;\n    Drei: typeof Drei;\n  }\n}\n\nif (typeof window !== 'undefined') {\n  window.React = React;\n  window.ReactDOM = ReactDOM;\n  window.VUER = VUER;\n  window.THREE = THREE;\n  window.JSX = JSX;\n  window.FIBER = FIBER;\n  window.XR = XR;\n  window.Drei = Drei;\n  window.LEVA = LEVA;\n  window.ZUSTAND = ZUSTAND;\n}\n\ntype MTypes = 'error' | 'warning' | 'success' | 'info';\ntype StateT = {\n  message?: string | null;\n  mtype?: MTypes | null;\n};\n\nfunction AppView() {\n  return (\n    <VuerRoot\n      bgChildren={[\n        <Grid key=\"grid\" _key=\"grid\" />,\n        <HemisphereLightStage key=\"default-light-stage\" />,\n        <Hands key=\"hands\" />,\n        <MotionControllers key=\"motion-controllers\" fps={30} stream />,\n      ]}\n    >\n      <ContribLoader\n        _key=\"contrib-loader-mujoco\"\n        // prodOnly\n        library=\"@vuer-ai/mujoco-ts\"\n        version=\"0.0.45\"\n        main=\"dist/index.umd.js\"\n      />\n    </VuerRoot>\n  );\n}\n\nfunction Page() {\n  const isSSR = typeof window === 'undefined';\n  const [{ message, mtype }, setState] = useState({\n    message: null,\n    mtype: null,\n  } as StateT);\n\n  // const { getRootProps, onClickAway } = useSnackbar({\n  //   onClose: () => {\n  //     setState({ message: null, mtype: null });\n  //   },\n  //   open: !!message,\n  //   autoHideDuration: 5000,\n  // });\n\n  useEffect(() => {\n    const oldError = console.error;\n    // console.error = (err) => {\n    //   setTimeout(() => {\n    //     setState({ message: err, mtype: \"error\" });\n    //     console.log(err);\n    //   }, 1)\n    // };\n    return () => {\n      console.error = oldError;\n    };\n  }, []);\n\n  useEffect(() => {\n    const oldWarn = console.warn;\n    console.warn = (err) => {\n      setTimeout(() => {\n        setState({ message: err, mtype: 'warning' });\n        console.log(err);\n      }, 1);\n    };\n    return () => {\n      console.warn = oldWarn;\n    };\n  }, []);\n\n  const context = useMemo(\n    () => ({\n      showError: (message: string) =>\n        setTimeout(() => setState({ message, mtype: 'error' }), 1),\n      showSuccess: (message: string) =>\n        setTimeout(() => setState({ message, mtype: 'success' }), 1),\n      showWarning: (message: string) =>\n        setTimeout(() => setState({ message, mtype: 'warning' }), 1),\n      showInfo: (message: string) =>\n        setTimeout(() => setState({ message, mtype: 'info' }), 1),\n      showModal: (message: string) => {\n        console.log(message);\n      },\n    }),\n    [],\n  );\n\n  // function render({ message, mtype }: StateT) {\n  //   switch (mtype) {\n  //     case 'error':\n  //       return <Snackbars {...getRootProps()}>ERROR: {message}</Snackbars>;\n  //     case 'warning':\n  //       return (\n  //         <WarningSnackbar {...getRootProps()}>\n  //           WARNING: {message}\n  //         </WarningSnackbar>\n  //       );\n  //     case 'success':\n  //       return (\n  //         <SuccessSnackbar {...getRootProps()}>\n  //           SUCCESS: {message}\n  //         </SuccessSnackbar>\n  //       );\n  //     case 'info':\n  //     default:\n  //       return <InfoSnackbar {...getRootProps()}>INFO: {message}</InfoSnackbar>;\n  //   }\n  // }\n\n  // if (isSSR) return null;\n  return (\n    <>\n      <Helmet>\n        <title>Vuer (Technical Preview)</title>\n      </Helmet>\n      <main className={style.main}>\n        {/*{message ? (*/}\n        {/*  <ClickAwayListener onClickAway={onClickAway}>*/}\n        {/*    {render({ message, mtype })}*/}\n        {/*  </ClickAwayListener>*/}\n        {/*) : null}*/}\n        {/*<Suspense fallback={<div>Loading...</div>}>*/}\n        <AppProvider value={context}>\n          {!isSSR ? (\n            <WebSocketProvider>\n              <AppView />\n            </WebSocketProvider>\n          ) : null}\n        </AppProvider>\n        {/*</Suspense>*/}\n      </main>\n    </>\n  );\n}\n\nexport default Page;\n"],"names":["React","ReactDOM","VUER","THREE","JSX","FIBER","XR","Drei","LEVA","ZUSTAND","AppView","jsx","VuerRoot","Grid","HemisphereLightStage","Hands","MotionControllers","ContribLoader","Page","isSSR","message","mtype","setState","useState","useEffect","oldError","oldWarn","err","context","useMemo","jsxs","Fragment","Helmet","style","AppProvider","WebSocketProvider"],"mappings":"4WA4CI,OAAO,OAAW,MACpB,OAAO,MAAQA,EACf,OAAO,SAAWC,EAClB,OAAO,KAAOC,EACd,OAAO,MAAQC,EACf,OAAO,IAAMC,EACb,OAAO,MAAQC,EACf,OAAO,GAAKC,EACZ,OAAO,KAAOC,EACd,OAAO,KAAOC,EACd,OAAO,QAAUC,GASnB,SAASC,GAAU,CAEf,OAAAC,EAAA,IAACC,EAAA,CACC,WAAY,CACTD,EAAAA,IAAAE,EAAA,CAAgB,KAAK,MAAA,EAAZ,MAAmB,EAC7BF,MAACG,KAAyB,qBAAsB,EAChDH,MAACI,KAAU,OAAQ,QAClBC,EAA2C,CAAA,IAAK,GAAI,OAAM,IAApC,oBAAqC,CAC9D,EAEA,SAAAL,EAAA,IAACM,EAAA,CACC,KAAK,wBAEL,QAAQ,qBACR,QAAQ,SACR,KAAK,mBAAA,CAAA,CACP,CACF,CAEJ,CAEA,SAASC,GAAO,CACR,MAAAC,EAAQ,OAAO,OAAW,IAC1B,CAAC,CAAE,QAAAC,EAAS,MAAAC,CAAS,EAAAC,CAAQ,EAAIC,EAAAA,SAAS,CAC9C,QAAS,KACT,MAAO,IAAA,CACE,EAUXC,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAW,QAAQ,MAOzB,MAAO,IAAM,CACX,QAAQ,MAAQA,CAClB,CACF,EAAG,EAAE,EAELD,EAAAA,UAAU,IAAM,CACd,MAAME,EAAU,QAAQ,KAChB,eAAA,KAAQC,GAAQ,CACtB,WAAW,IAAM,CACfL,EAAS,CAAE,QAASK,EAAK,MAAO,UAAW,EAC3C,QAAQ,IAAIA,CAAG,GACd,CAAC,CACN,EACO,IAAM,CACX,QAAQ,KAAOD,CACjB,CACF,EAAG,EAAE,EAEL,MAAME,EAAUC,EAAA,QACd,KAAO,CACL,UAAYT,GACV,WAAW,IAAME,EAAS,CAAE,QAAAF,EAAS,MAAO,OAAS,CAAA,EAAG,CAAC,EAC3D,YAAcA,GACZ,WAAW,IAAME,EAAS,CAAE,QAAAF,EAAS,MAAO,SAAW,CAAA,EAAG,CAAC,EAC7D,YAAcA,GACZ,WAAW,IAAME,EAAS,CAAE,QAAAF,EAAS,MAAO,SAAW,CAAA,EAAG,CAAC,EAC7D,SAAWA,GACT,WAAW,IAAME,EAAS,CAAE,QAAAF,EAAS,MAAO,MAAQ,CAAA,EAAG,CAAC,EAC1D,UAAYA,GAAoB,CAC9B,QAAQ,IAAIA,CAAO,CAAA,CACrB,GAEF,CAAA,CACF,EAyBA,OAEIU,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAApB,MAACqB,EACC,CAAA,SAAArB,EAAA,IAAC,QAAM,CAAA,SAAA,0BAAwB,CAAA,EACjC,QACC,OAAK,CAAA,UAAWsB,EAAM,KAOrB,SAAAtB,MAACuB,GAAY,MAAON,EACjB,SAACT,EAIE,WAHDgB,EACC,CAAA,SAAAxB,EAAAA,IAACD,IAAQ,CACX,CAAA,CAEJ,CAAA,CAEF,CAAA,CAAA,EACF,CAEJ"}